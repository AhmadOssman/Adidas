(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@accessibility_switch",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("turbo-initiate-migration-switch").register("turbo-checkout-accessibility-switch",function(a){return{isEnabled:function(){return a.isEnabled()}}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@buy_now_to_tango_switch",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("turbo-configuration","buy-now-to-tango-switch-mobile","buy-now-to-tango-switch-desktop","buy-now-to-tango-switch-beta").register("buy-now-to-tango-switch",function(a,b,c,d){return{isEnabled:function(){return a.get(a.KEYS.IS_BUY_NOW_TO_TANGO_ENABLED)&&(b.isGatingWeblabEnabled()||
c.isGatingWeblabEnabled()||d.isGatingWeblabEnabled())}}});"use strict";b.when("turbo-checkout-page-ready").register("buy-now-to-tango-switch-mobile",function(){return{isGatingWeblabEnabled:function(){return!1}}});"use strict";b.when("turbo-checkout-page-ready").register("buy-now-to-tango-switch-desktop",function(){return{isGatingWeblabEnabled:function(){return!1}}});"use strict";b.when("turbo-checkout-device-filter","turbo-checkout-page-ready").register("buy-now-to-tango-switch-beta",function(a){return{isGatingWeblabEnabled:function(){return a.isMashBeta()}}})});
/* ******** */
(function(a){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("TurboCheckoutBaseAssets@chewbacca_migration_switch",""):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,d){a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-non-prime-desktop",function(b){return{isGatingWeblabEnabled:function(){return!1},isShadowModeEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-prime-desktop",
function(b){return{isGatingWeblabEnabled:function(){!1},isShadowModeEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-non-prime-mobile",function(b){return{isGatingWeblabEnabled:function(){return!1},isShadowModeEnabled:function(){return!1}}});"use strict";a.when("turbo-checkout-state-handler").register("turbo-chewbacca-migration-switch-prime-mobile",function(b){return{isGatingWeblabEnabled:function(){return!1},isShadowModeEnabled:function(){return!1}}});
"use strict";a.when("turbo-checkout-state-handler","turbo-chewbacca-migration-switch-prime-mobile","turbo-chewbacca-migration-switch-non-prime-mobile","turbo-chewbacca-migration-switch-prime-desktop","turbo-chewbacca-migration-switch-non-prime-desktop").register("turbo-chewbacca-migration-switch",function(b,a,c,d,e){return{isGatingWeblabEnabled:function(){return a.isGatingWeblabEnabled()||c.isGatingWeblabEnabled()||d.isGatingWeblabEnabled()||e.isGatingWeblabEnabled()},isShadowModeEnabled:function(){return a.isShadowModeEnabled()}}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@chewbacca_migration_switch_beta",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("turbo-checkout-state-handler","turbo-checkout-device-filter").register("turbo-chewbacca-migration-switch-beta",function(a,b){return{isGatingWeblabEnabled:function(){return!1},isShadowModeEnabled:function(){return!1}}})});
/* ******** */
(function(a){var c=window.AmazonUIPageJS||window.P,f=c._namespace||c.attributeErrors,b=f?f("TurboCheckoutBaseAssets@initiate_migration_switch",""):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,f){a.when("turbo-initiate-migration-switch-mobile","turbo-initiate-migration-switch-desktop").register("turbo-initiate-migration-switch",function(b,a){return{isEnabled:function(){return b.isEnabled()||a.isEnabled()}}});"use strict";a.when("turbo-chewbacca-migration-switch",
"turbo-checkout-weblab-allocation").register("turbo-initiate-migration-switch-mobile",function(b,a){return{isEnabled:function(){return!1}}});"use strict";a.when("turbo-chewbacca-migration-switch","turbo-checkout-weblab-allocation").register("turbo-initiate-migration-switch-desktop",function(b,a){var c=["PAX_TURBO_INITIATE_MIGRATION_DESKTOP_868123","PAX_TURBO_INITIATE_MIGRATION_DESKTOP_NON_PRIME_986684"];return{isEnabled:function(){var d;if(d=b.isGatingWeblabEnabled())a:{d=a.getTurboRedesignWeblabs();
for(var e=0;e<c.length;e++)if(d.hasOwnProperty(c[e])&&"T1"===d[c[e]]){d=!0;break a}d=!1}return d}}})});
/* ******** */
(function(a){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,b=d?d("TurboCheckoutBaseAssets@shopping_portal_switch",""):c;b.guardFatal?b.guardFatal(a)(b,window):b.execute(function(){a(b,window)})})(function(a,c,d){a.when("turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-shopping-portal-switch",function(b){return{isShoppingPortalEnabled:function(){var a=b.getClientId();return!("primewardrobe"===a||"primestylist"===a)}}})});
/* ******** */
(function(b){var c=window.AmazonUIPageJS||window.P,d=c._namespace||c.attributeErrors,a=d?d("TurboCheckoutBaseAssets@tbyb_shopping_portal_switch",""):c;a.guardFatal?a.guardFatal(b)(a,window):a.execute(function(){b(a,window)})})(function(b,c,d){b.when("turbo-checkout-page-ready").register("turbo-tbyb-shopping-portal-switch",function(){return{isTBYBShoppingPortalEnabled:function(){return!1}}})});
/* ******** */
(function(g){var n=window.AmazonUIPageJS||window.P,x=n._namespace||n.attributeErrors,b=x?x("TurboCheckoutBaseAssets@confirm_initiate_removal",""):n;b.guardFatal?b.guardFatal(g)(b,window):b.execute(function(){g(b,window)})})(function(g,n,x){g.when("A","turbo-view-adapter","turbo-checkout-view-state","turbo-checkout-eligible-state","turbo-checkout-content-loader","turbo-checkout-utils","turbo-checkout-weblab-allocation","turbo-checkout-weblab-trigger","turbo-checkout-csm","turbo-checkout-state-handler",
"turbo-checkout-device-filter","turbo-checkout-ajax-wrapper","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-prefetcher","turbo-checkout-prefetch-timer","turbo-checkout-buy-now-button","turbo-checkout-signin-controller","buy-now-to-tango-weblab-trigger","turbo-checkout-auto-open","turbo-checkout-urls","turbo-checkout-ref-tagger","turbo-configuration","turbo-checkout-event-verification","turbo-checkout-emit-order-success-event","turbo-checkout-page-ready").register("turbo-checkout-controller",
function(b,d,g,k,P,t,l,n,e,h,C,y,x,z,u,A,p,I,E,J,F,M,q,a,c){function f(){p.bindTurboClickEvent();b.off("turbo:checkout:dimmer:clicked");b.on("turbo:checkout:dimmer:clicked",function(r){r()})}function v(r,a){t.logDebug("turbo-checkout-controller",r,a)}function Q(r,a){G();r||(a===M.TAGS.ROTATION&&e.logCount("turboCheckoutDeviceRotated"),d.close({reason:a}))}function X(){v("Handling signin success");R()}function S(){v("Handling buy now button click");R();return!0}function R(){T=setTimeout(W,2E4);w=e.createScope();
w.markClick();B="loading";K=!1;A.checkTimeout();z.incrementSheetOpenedCounter();d.show()}function W(){e.logCount("turboCheckoutContenLoadTimeout")}function H(){G();d.removeContent()}function D(){G();a.logBuyNowButtonClickHandlerMetrics()}function G(){k.canShow()&&!l.isDisableTurboWeblabInTreatment()?(v("Registering with buy now button"),b.trigger("turbo:checkout:buyNowEnabled"),p.registerOnClickCallback(S)):(v("Unregistering from buy now button"),b.trigger("turbo:checkout:buyNowDisabled"),p.deregisterOnClickCallback(S))}
function Y(a,N){e.logCount("turboCheckoutPrefetchSuccess");a&&(l.isControl()||l.isBuyNowOnly())&&(v("Received content in control: "+a.substring(0,255)),e.logCount("turboCheckoutControlContentReceived"));O=N;d.setContent(a);G();P.shadowCallChewbaccaInitiate()}function Z(){G();g.isOpeningOrOpen()&&(e.logCount("turboCheckoutYieldNewPurchase"),d.closeImmediatelyThenExecute(U))}function aa(){clearTimeout(T);B="unknown";!m||m.isResolved()||m.isRejected()||(v("Initiate confirm called for "+O.currentPurchaseId+
" with existing confirm still executing. Aborting"),e.logCount("turboCheckoutConfirmPending"),m._supersedByNewPurchase=!0,m.abort());ba()}function ca(){var a=h.getLineItems().filter(function(a){return a&&a.isDiscoveredAsin}).map(function(a,r){return a.asin});e.logCount("turboCheckoutDiscoveredAsins",a.length);return a}function ba(){e.logCount("turboCheckoutConfirm");var a=O.currentPurchaseId,c=F.buildConfirmPathWith(h.getRefTag(),l.getExperimentName(),h.getClientId(),h.getRequestId(),h.getSessionId(),
ca());m=y.loadWithJQXHR(c,{type:"POST",data:{pid:a},headers:da(),success:function(a,r,c){e.logCount("turboCheckoutConfirmSuccess")},error:function(r,c,N){"abort"===c?e.logCount("turboCheckoutConfirmAborted"):("timeout"===c&&e.logCount("turboCheckoutConfirmTimeOut"),e.logCount("turboCheckoutConfirmFailed"));r._supersedByNewPurchase||(t.logError("Issue confirming turbo initiate prefetch for pid "+a+": "+N+", "+c),e.logCount("turboCheckoutYieldNewPurchase"),d.closeImmediatelyThenExecute(U))}})}function da(){var a=
{},c=h.getCSRFToken();c&&0<c.length&&(a["x-amz-checkout-csrf-token"]=c);return a}function ea(){w.markFirstByte()}function L(){return q.get(q.KEYS.HOST_PAGE_TYPE_IDENTIFIER)}function U(){p.executeOriginalBuyNowAction(h.getActiveId())}function fa(a){b.trigger("turbo:checkout:embedded:page:showSpinner");m.done(a)}function ha(a,c,b){B=b;K=!1}function ia(){K=!0}function ja(a){b.off("turbo:checkout:dimmer:clicked");b.on("turbo:checkout:dimmer:clicked",function(a){a()});a&&a.doNotLog||(a&&!a.doNotLog?V(B,
a.reason):V(B,!1));B="closed"}function V(a,c){var b=F.buildLogPageHitPathWith(K?a+"2":a,c,h.getClientId());v("Logging page hit from "+a+" to "+L()+" reason "+c);y.load(b,{method:"POST",params:{pageType:L(),referrer:a},timeout:4E3})}function ka(){g.isOpeningOrOpen()&&e.logCount("turboCheckoutProductChangedWhileOpening")}var w,B,O,K,la=q.get(q.KEYS.AJAX_PAGE_UPDATE_EVENT),T,m;b.on(la,f);f();return{pageLoaded:function(){var a=l.getExperimentName();if(a){var c=l.getAllocation();e.addCounterExtraSuffix("wl:"+
c);e.addCounterExtraSuffix(a+":"+c)}C.isDeviceTurboEligible()&&(k.setup(),k.registerStateChangeCallback(Q),x.setup(),P.registerCallback({onStart:H,onTurboEligible:D,onFinish:Y,onError:Z}),n.setup(),I.setup(),I.registerCallback(X),E.registerBuyNowToTangoTriggerOnButton(),w=e.createScope(),d.registerCallbacks({beforeFramePopulated:aa,afterFramePopulated:ea}),h.registerCallback(ka),b.on("turbo:checkout:sheet:beforeClose",ja),b.on("turbo:checkout:embedded:page:beforeReload",ha),b.on("turbo:checkout:embedded:page:animation:start",
ia),J.setup(p.executeTurboBuyNowAction,D),u.setup(),b.trigger("turbo:checkout:controller:onPageLoaded"))},loadFullscreen:function(a,c){function b(){a=t.createFQDN(a);"thankyou"===c?(e.logCount("turboCheckoutYieldTYP"),"primewardrobe"===h.getClientId()&&e.logCount("turboCheckoutYieldTYP:pw"),d.closeAndNavigate(a)):"thirdPartyPaymentInterstitial"===c?d.closeAndNavigate(a):"verifyMfaPage"===c?("primewardrobe"===h.getClientId()&&e.logCount("turboCheckoutYieldTYP:pw"),d.closeAndNavigate(a)):(e.logCount("turboCheckoutYield"),
d.closeToFullscreen(a))}!m||m.isResolved()||m.isRejected()?b():(e.logCount("turboCheckoutWaitYield"),fa(b))},frameContentReady:function(a,f,d){b.trigger("turbo:checkout:embedded:page:ready",a,f);(function(){var a=function(){w.markCriticalFeature();d.confirmHit(L(),h.getRefTag());w.whenDataSet(d.recordClientSideMetrics);f.off("checkout:afterReload",a)};f.on("checkout:afterReload",a)})();(function(){f.on("checkout:beforeReload",function(c){b.trigger("turbo:checkout:embedded:page:beforeReload",a,f,c)});
f.on("checkout:reload",function(c){b.trigger("turbo:checkout:embedded:page:reload",a,f,c)});f.on("checkout:afterReload",function(c){b.trigger("turbo:checkout:embedded:page:afterReload",a,f,c)});f.on("turbo:checkout:animation:start",function(){b.trigger("turbo:checkout:embedded:page:animation:start")});f.state("turbo-secondary-panels-weblab-state",l.getHoldbackSecondaryPanelsWeblab());b.on("turbo:checkout:embedded:page:showSpinner",function(){d.showSpinner()});b.off("turbo:checkout:dimmer:clicked");
b.on("turbo:checkout:dimmer:clicked",function(a){f.trigger("turbo:checkout:dimmer:clicked:iFrame",a)});f.on("turbo:checkout:update:dimmer",function(a){b.trigger("turbo:checkout:update:dimmer:afterReload",a)});f.on("turbo:checkout:update:modal:header",function(a){b.trigger("turbo:checkout:update:modal:header:afterReload",a)});f.on("turbo:checkout:update:dimmer:block",function(){b.trigger("turbo:checkout:update:dimmer:block:iFrame")});f.on("turbo:checkout:update:dimmer:unblock",function(){b.trigger("turbo:checkout:update:dimmer:unblock:iFrame")});
if(c.isEnabled())f.on("turbo:checkout:order:success",function(){b.trigger("turbo:checkout:order:success:iFrame")})})()},frameHtmlRendered:function(){w.markAboveTheFold()},updateBounds:function(a,c){d.updateBounds(a,c)},getHeight:function(){return d.getHeight()},updateMinHeight:function(a){return d.updateMinHeight(a)},updateScrollHeight:function(a,c){return d.updateScrollHeight(a,c)},updateDimmer:function(a){b.trigger("turbo:checkout:update:dimmer:typReload",a)},getHostPageType:L,closeBottomSheet:function(a){b.trigger("turbo:checkout:sheet:doClose",
a)}}});"use strict";g.register("turbo-discovered-asins-filter",function(){return{apply:function(b){return b.filter(function(b){return b&&b.isDiscoveredAsin}).map(function(b,g){return b.asin})}}});"use strict";g.when("A","turbo-configuration","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-initiate-migration-switch","turbo-shopping-portal-switch","turbo-tbyb-shopping-portal-switch","turbo-checkout-state-handler","buy-now-to-tango-switch","turbo-checkout-eligibility-aggregator","turbo-checkout-page-ready").register("turbo-checkout-urls",
function(b,d,g,k,n,t,l,H,e,h){function C(a,c){if(a&&n.isEnabled()||c){try{var f=b.$("#debug-purchase-id")[0].textContent;var d=f===x?"":"/"+f}catch(Q){d=""}a="/checkout/entry/buynow"+d}else a=l.isTBYBShoppingPortalEnabled()&&y()?"/checkout/trybeforeyoubuy/turbo-initiate":t.isShoppingPortalEnabled()?"/checkout/turbo/initiate":"/checkout/turbo-initiate";return a}function y(){return"primewardrobe"===H.getClientId()}function D(a,c){return["\x26",a,"\x3d",c].join("")}function z(a,c,f){a="\x26pipelineType\x3dturbo\x26clientId\x3d"+
a;var b=d.get(d.KEYS.DEVICE_OVERRIDE);return a+(b?"\x26devicestring-override\x3d"+b:"")+E(c,f)}function u(a){var c=d.get(d.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return"ref_\x3d"+a+"\x26referrer\x3d"+c}function A(a){return k.isNonEmptyString(a)?"\x26weblab\x3d"+a:""}function p(){return d.get(d.KEYS.IS_ADD_TO_CART_ENABLED)?"\x26temporaryAddToCart\x3d1":""}function I(a){if(!a||!a.length)return"";d.get(d.KEYS.IS_ADD_TO_CART_ENABLED)||k.logError('Discovered asins present but add to cart is disabled? This will generate a "clickstream_ignore" hit on the server side and cause the hit to be ignored by clickstream and the attribution lost!',
"turbo-checkout-urls");var c="";a.forEach(function(a,b){c+="\x26discoveredAsins."+b+"\x3d"+a});return c}function E(a,c){var b="";k.isNonEmptyString(a)&&(b+="\x26pageRequestId\x3d"+a);k.isNonEmptyString(c)&&(b+="\x26pageSessionId\x3d"+c);return b}function J(){return l.isTBYBShoppingPortalEnabled()&&y()?"/checkout/trybeforeyoubuy/triggerWeblab":t.isShoppingPortalEnabled()?"/checkout/turbo/triggerWeblab":"/checkout/triggerWeblab"}function F(){return q("auiDebug","auiDebug")+q("ds_user","ds_user")+q("ds_turbo_workspace",
"ds_workspace")+q("stringDebug","stringDebug")}function M(a){a=a?a:[];var c="";a.forEach(function(a,b){c+="\x26asin."+(b+1)+"\x3d"+a.asin});return c}function q(a,c){var b="";a=k.getUrlQueryParam(a);k.isNonEmptyString(a)&&(b="\x26"+c+"\x3d"+a);return b}return{buildInitiatePathWith:function(a,c,b,d,e,h,g){var f=C(!0,g);a=f+"?"+u(a)+z(b,d,e)+A(c)+p()+F()+M(h);c="";k.isNonEmptyString(f)&&-1!==f.indexOf("/checkout/entry/buynow")&&(c="\x26turboCheckoutMigrationFlag\x3d1");g&&(c+="\x26isShadowMode\x3d1");
return a+c},buildEligibilityPathWith:function(a,c,b,d,g){a=C()+"?"+u(a)+z(b,d,g)+A(c)+"\x26checkEligibilityOnly\x3dtrue"+p()+F();c=h.shouldAttemptTurboPrefetch()&&h.isTurboEligible();b=[];b.push(D("runTurboEligibility",c));e.isEnabled()&&b.push(D("runTangoEligibility",H.isProductTangoEligible()));c=b.join("");return a+c},buildConfirmPathWith:function(a,c,b,d,e,g){return C()+"/confirm?"+u(a)+z(b,d,e)+A(c)+p()+I(g)},buildLogPageHitPathWith:function(a,c,b){a=(l.isTBYBShoppingPortalEnabled()&&y()?"/checkout/trybeforeyoubuy/log-page-hit":
t.isShoppingPortalEnabled()?"/checkout/turbo/log-page-hit":"/checkout/log-page-hit")+"?"+g.generateRefTag(a,g.ACTIONS.CLOSE,c)+z(b);c=n.isEnabled()?"":"\x26isLegacyCheetah\x3d1";return a+c},buildTriggerWeblabPathWith:function(a,b,d,e,g){return J()+"?"+u(a)+A(b)+"\x26weblabAllocation\x3d"+d+E(e,g)},buildTriggerWeblabPathWithoutWeblab:function(a,b,d){return J()+"?"+u(a)+E(b,d)}}});"use strict";g.register("turbo-checkout-emit-order-success-event",function(){return{isEnabled:function(){return!1}}})});
/* ******** */
(function(h){var m=window.AmazonUIPageJS||window.P,B=m._namespace||m.attributeErrors,d=B?B("TurboCheckoutBaseAssets@base",""):m;d.guardFatal?d.guardFatal(h)(d,window):d.execute(function(){h(d,window)})})(function(h,m,B){"use strict";h.register("turbo-function-adapter",function(){return{adapt:function(d){return function(){if("function"!==typeof d)throw Error("Parameter 'property' is invalid. Expected a function but got "+typeof d);return d.apply(d,arguments)}}}});"use strict";h.when("turbo-configuration",
"turbo-function-adapter").execute("turbo-signin-adapter-factory",function(d,a){h.when(d.get(d.KEYS.SHOW_SIGN_IN_INTERFACE)).register("turbo-signin-adapter",function(b){return{show:a.adapt(b.show)}})});"use strict";h.when("turbo-configuration","turbo-function-adapter").execute("turbo-view-adapter-factory",function(d,a){h.when(d.get(d.KEYS.VIEW_ADAPTER)).register("turbo-view-adapter",function(b){return{registerCallbacks:a.adapt(b.registerCallbacks),close:a.adapt(b.close),show:a.adapt(b.show),removeContent:a.adapt(b.removeContent),
setContent:a.adapt(b.setContent),closeImmediatelyThenExecute:a.adapt(b.closeImmediatelyThenExecute),closeAndNavigate:a.adapt(b.closeAndNavigate),closeToFullscreen:a.adapt(b.closeToFullscreen),updateBounds:a.adapt(b.updateBounds),getHeight:a.adapt(b.getHeight),updateMinHeight:a.adapt(b.updateMinHeight),updateScrollHeight:a.adapt(b.updateScrollHeight),updateBottomSheetAttributes:a.adapt(b.updateBottomSheetAttributes)}})});"use strict";h.when("A","turbo-checkout-utils","turbo-checkout-csm","turbo-callback-list",
"turbo-checkout-form","turbo-configuration","turbo-checkout-weblab-allocation","turbo-checkout-load-events","turbo-checkout-page-ready").register("buy-now-to-tango-parameter-eligibility-listener",function(d,a,b,c,f,e,g,k){function l(a){var c=u,e=f.getForms(w(v));e===B||0===e.length?b.logCount("buyNowToTangoCheckoutInvalidBuyNowForm"):(a(e),c!==u&&(p("Buy Now to Tango parameter eligibility state has changed"),!0===u?p("Form corresponding to the Buy Now button is Buy Now to Tango parameter eligible",
e):p("Form corresponding to the Buy Now button is NOT Buy Now to Tango parameter eligible",e),y.callAll("buyNowToTangoFormParameterEligibility")))}function q(e){p("Observing child node mutation events on:",e);try{var c=e[0];(new MutationObserver(function(){l(n)})).observe(c,{childList:!0,subtree:!0})}catch(G){b.logCount("buyNowToTangoCheckoutObserveBuyNowFormException"),a.logWarning("buy-now-to-tango-parameter-eligibility-listener","Exception while attempting to observe the Buy Now Button Form \x3d "+
G+". Buy Now Button Form: ",e)}}function n(a){z=E=0;a=!0;for(var c=t(),p=e.get(e.KEYS.BUY_NOW_TO_TANGO_PARAMETER_ALLOW_LIST),f=g.getBuyNowToTangoWeblabs(),n=0;n<c.length;n++){var d=c[n];r(d,p,f)||(E++,a=!1,b.logCountSimple("buyNowToTangoCheckoutParameterExcluded:onDetailPageStateChange:"+d))}u=0<c.length?a:!1}function t(){var a=f.getForms(w(v));if(a===B||0===a.length)b.logCountSimple("buyNowToTangoCheckoutInvalidBuyNowForm");else{a=a.find("input[type\x3dhidden]");for(var c=[],e=0;e<a.length;e++)c.push(a[e].getAttribute("name"));
return c}}function r(a,b,e){if(!a)return!0;if(!b.hasOwnProperty(a))return!1;a=b[a];return a?"T1"!==e[a]?(z++,!1):!0:!0}function A(a,b){return a.every(function(a){return 0<=b.indexOf(a)})}function p(b,e){a.logDebug("buy-now-to-tango-parameter-eligibility-listener",b,e)}var v=e.get(e.KEYS.BUY_NOW_BUTTON_SELECTOR),w=d.$,y=c.create(),u=!1,E=0,z=0;k.bind(function(){e.get(e.KEYS.IS_BUY_NOW_TO_TANGO_ENABLED)&&l(function(a){n(a);q(a)})});return{onStateChange:function(a){y.push(a)},isBuyNowToTangoParameterEligible:function(){return u},
logBuyNowFormParameterExclusionsAndFeatures:function(){for(var a=t(),c=e.get(e.KEYS.BUY_NOW_TO_TANGO_PARAMETER_ALLOW_LIST),f=e.get(e.KEYS.BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING),n={},r=0;r<a.length;r++)if(!c.hasOwnProperty(a[r])){b.logCountSimple("buyNowToTangoCheckoutParameterExcluded:onBuyNowButtonClick:"+a[r]);f.hasOwnProperty(a[r])||(b.logCountSimple("buyNowToTangoCheckoutParameterExcluded:onBuyNowButtonClick:Unknown"),p("Buy Now To Tango Unknown Parameter Observed: "+a[r]));var d="Unknown";
f.hasOwnProperty(a[r])&&""!==f[a[r]]&&(d=f[a[r]]);n[d]=!0}for(var g in n)n.hasOwnProperty(g)&&b.logCountSimple("buyNowToTangoCheckoutParameterExcluded:Feature:"+g);c=e.get(e.KEYS.BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING);f=!1;for(var l in c)c.hasOwnProperty(l)&&A(c[l],a)&&(b.logCountSimple("buyNowToTangoCheckoutParameterExcluded:FeatureByGrouping:"+l),f=!0);f||b.logCountSimple("buyNowToTangoCheckoutParameterExcluded:FeatureByGrouping:Unknown")},isBuyNowToTangoParameterIneligibleOnlyDueToNonT1WeblabAllocation:function(){return 0!==
E&&E===z}}});"use strict";h.when("A","turbo-checkout-utils","turbo-configuration","turbo-checkout-form","buy-now-to-tango-switch","buy-now-to-tango-switch-mobile","turbo-checkout-buy-now-button","turbo-checkout-eligible-state","turbo-checkout-weblab-allocation","turbo-checkout-state-handler","buy-now-to-tango-url-handler","turbo-checkout-urls","turbo-checkout-weblab-trigger","buy-now-to-tango-parameter-eligibility-listener","turbo-checkout-csm","turbo-checkout-page-ready").register("buy-now-to-tango-weblab-trigger",
function(d,a,b,c,f,e,g,k,l,q,n,t,r,A,p){function v(){!k.canShow()&&n.isBuyNowClickPointingToTango()?p.logCountSimple("BUY_NOW_TO_TANGO_HIT"):f.isEnabled()&&!k.canShow()&&e.isGatingWeblabEnabled()&&(p.logCountSimple("BUY_NOW_TO_TANGO_EXCLUDED"),A.isBuyNowToTangoParameterEligible()||(p.logCountSimple("BUY_NOW_TO_TANGO_EXCLUSION_REASON:Parameter"),A.logBuyNowFormParameterExclusionsAndFeatures()),q.isProductTangoEligible()||p.logCountSimple("BUY_NOW_TO_TANGO_EXCLUSION_REASON:ASIN"),q.isProductTangoEligible()&&
!n.isTangoCustomerAndAsinEligible()&&p.logCountSimple("BUY_NOW_TO_TANGO_EXCLUSION_REASON:Customer"));var d=w(y);d=c.getForms(d);if(d===B||0===d.length)return!1;var g=d.find("input[type\x3dhidden]");d=[];for(var v=0;v<g.length;v++){var H=g[v].getAttribute("name"),h=b.get(b.KEYS.BUY_NOW_TO_TANGO_PARAMETER_ALLOW_LIST)[H];H&&h&&0>d.indexOf(h)&&d.push(h)}v=l.getBuyNowToTangoWeblabs();g=[];for(H=0;H<d.length;H++){h=d[H];var m=v[h],C=m,x=!k.canShow(),F="T1"===C&&n.isBuyNowClickPointingToTango(),K=n.isTangoCustomerAndAsinEligible();
C="C"===C&&A.isBuyNowToTangoParameterIneligibleOnlyDueToNonT1WeblabAllocation();x&&(F||K&&C)&&(g.push({weblabName:h,weblabAllocation:m}),a.logDebug("Buy Now button will trigger ",m,"for ",h))}0<g.length&&(d=t.buildTriggerWeblabPathWithoutWeblab(q.getRefTag(),q.getRequestId(),q.getSessionId()),r.sendTurboWeblabRequest(d,g));return!1}var w=d.$,y=b.get(b.KEYS.BUY_NOW_BUTTON_SELECTOR);return{registerBuyNowToTangoTriggerOnButton:function(){g.registerOnClickCallback(v)},_forTestOnly:{_triggerBuyNowToTangoExperimentWeblabs:v}}});
"use strict";h.when("turbo-checkout-page-ready").execute(function(){h.declare("turbo-eligibility-override",!1)});"use strict";h.when("A","turbo-checkout-csm","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-address-id",function(d,a,b){function c(b){for(var c=0;c<b.length;c++){var e=f(b[c]);if(0<e.length)return a.logCount("turboCheckoutAddressSelectorIndex"+c),e}a.logCount("turboCheckoutAddressSelectorMissing");return f()}var f=d.$;return{getAddressId:function(){return c(b.get(b.KEYS.ADDRESS_INPUT_SELECTORS)).val()||
""},set:function(a){c(b.get(b.KEYS.ADDRESS_INPUT_SELECTORS)).val()!==a&&c(b.get(b.KEYS.ADDRESS_INPUT_SELECTORS)).val(a).trigger("change",[a])}}});"use strict";h.when("A","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkbox-exclusion-listener",function(d,a,b,c,f){function e(a){var b=r;r=!1;for(var c=0;c<q.length;c++){var e=n(q[c]).find("input[type\x3dcheckbox]");a(e)}b!==r&&(k("Exclusion checkbox state changed"),
t.callAll("exclusionCheckbox"))}function g(a){var b;if(!(b=r)){b=!1;for(var c=0;c<a.length&&!b;c++){var e=n(a[c]);(b=e.prop("checked"))&&k("Exclusion checkbox is checked",e)}}r=b}function k(b,c){a.logDebug("turbo-checkbox-exclusion-listener",b,c)}function l(){e(g)}var q=c.get(c.KEYS.CHECKBOX_EXCLUSION_ROOT_NODES),n=d.$,t=b.create(),r=!1;f.bind(function(){e(function(a){k("Listening for change events on:",a);a.unbind("change",l).bind("change",l);g(a)})});return{onStateChange:function(a){t.push(a)},
isAnyCheckboxChecked:function(){return r}}});"use strict";h.when("A","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-custom-price-input",function(d,a,b){function c(){var a=f();k!==a&&(k=a,g.callAll())}function f(){return e("#gcPriceOverride").val()||""}var e=d.$,g=a.create(),k;b.bind(function(){k=f();e("#gcPriceOverride").unbind("change",c).bind("change",c)});return{getCustomPrice:f,onChange:function(a){g.push(a)}}});"use strict";h.when("A",
"turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-quantity-input",function(d,a,b,c,f,e){function g(a){var c=a?a.value?parseInt(a.value,10):a.target&&a.target.value?parseInt(a.target.value,10):void 0:void 0;r===c?b.logDebug("turbo-checkout-quantity-input","Quantity change event does NOT have new quantity. Suppressing callbacks",void 0):(r=c,b.logDebug("turbo-checkout-quantity-input",
"Quantity change event",a),q.callAll())}function k(b){b=b.val();(b=parseInt(b,10))||a.logCount("turboCheckoutNoQuantityFromPage");return b}var l=d.$,q=f.create(),n=c.get(c.KEYS.QUANTITY_SELECT_SELECTOR),t="Multiple quantity nodes present on the page. This may lead to an incorrect quantity being used in Turbo! Selector \x3d "+n,r;e.bind(function(){var c=l(n);r=k(c);c.unbind("change",g).bind("change",g);1<c.length&&(b.logError(t,"turbo-checkout-quantity-input"),b.logDebug("turbo-checkout-quantity-input",
t,c));a.logCount("turboCheckoutQuantityNodes",c.length)});return{getQuantity:function(){return k(l(n))},setQuantity:function(a){var b=l(n),c=k(b);a=parseInt(a,10);c!==a&&b.val(a).change()},onChange:function(a){q.push(a)}}});"use strict";h.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-callback-list","turbo-configuration","turbo-checkout-quantity-input","turbo-checkout-load-events","turbo-checkout-page-ready").register("turbo-checkout-warranty-input",function(d,a,b,c,f,e,g){var k=d.$,
l=c.create(),q=f.get(f.KEYS.WARRANTY_CHECKBOX_INPUT_SELECTOR),n=f.get(f.KEYS.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR),t=f.get(f.KEYS.WARRANTY_ASIN_INPUT_NAME),r=f.get(f.KEYS.WARRANTY_OFFER_INPUT_SELECTOR);g.bind(function(){k(q).unbind("click",l.callAll).bind("click",l.callAll)});return{select:function(a){a&&k(n+" input[name^\x3d"+t+"][value\x3d"+a+"]").parents(n).find(q).click()},onChange:function(a){l.push(a)},getLineItem:function(c){if(k(q+":checked").length){var f=k(q+":checked").first().parents(n).find("input[name^\x3d"+
t+"]").val()||"",d=k(r).val()||"";c=parseInt(c,10)||e.getQuantity()||1;if(f&&d)return{asin:f,offerListingId:d,quantity:c,isDiscoveredAsin:!0};a.logCount("turboCheckoutIncompleteWarrantyInputs");b.logError("Incomplete input data for the selected warranty checkbox - asin:"+f+", offerId:"+d+", quantity:"+c)}else b.logDebug("turbo-checkout-warranty-input","No warranty checkbox is selected",void 0)}}});"use strict";h.when("A","turbo-checkout-csm","turbo-callback-list","turbo-configuration","turbo-checkout-load-events",
"turbo-checkout-page-ready").register("turbo-checkout-vas-input",function(d,a,b,c,f){function e(){return q(k).prop("checked")||!1}function g(){var a=t;t=e();a!==t&&n.callAll(t)}var k=c.get(c.KEYS.VAS_CHECKBOX_SELCTOR),l=c.get(c.KEYS.VAS_CHANGE_EVENTS),q=d.$,n=b.create(),t;f.bind(function(){t=e();l.forEach(function(a){d.off(a,g);d.on(a,g)})});return{isSelected:e,onChange:function(a){n.push(a)}}});"use strict";h.when("A","turbo-checkout-utils","turbo-callback-list","turbo-checkout-load-events","turbo-checkout-csm",
"turbo-checkout-aui-page-state-parser","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-accessories-input",function(d,a,b,c,f,e,g){function k(){var a=w;w=A();w!==a&&v.callAll()}function l(){if(y===B&&p(u).length){var a=e.parse("simpleBundleParameterMap",".simpleBundleFeatureContainer");0===a.length?(f.logCount("Turbo:Accessories:No:State"),y={}):q(a)}}function q(a){y={};a[0].items.forEach(function(a){y[a.asin]={asin:a.asin,offerListingId:a.offerListingId,isDiscoveredAsin:!0}})}
function n(){return p(u).find("input[type\x3dcheckbox]")}function t(){n().unbind("change",k).bind("change",k)}function r(){return p(u).length?1>=w:0===w}function A(){var b=0;n().each(function(){p(this).prop("checked")&&b++});a.logDebug("turbo-checkout-accessories-input","Accessories selected "+b);return b}var p=d.$,v=b.create(),w=0,y,u=g.get(g.KEYS.ENABLED_ACCESSORIES_SELECTOR);l();t();c.bind(function(){l();t();A()});return{isEligible:r,registerCallback:function(a){v.push(a)},getLineItem:function(){if(r()){var a=
n().filter(":checked").val();a=y?y[a]:void 0;return a||B}return B},select:function(a){a&&p(u+" input[type\x3dcheckbox][value\x3d"+a+"]").click()}}});"use strict";h.when("A","turbo-checkout-csm","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-session-id-input",function(d,a,b){var c=d.$;return{getSessionId:function(){var f=c(b.get(b.KEYS.SESSION_ID_SELECTOR));f&&0<f.length||(a.logCount("turboCheckoutSessionIdSelectorMissing"),f=c());return f.val()||""}}});"use strict";h.when("A",
"turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-checkout-page-ready").register("java-checkout-url-page-state",function(d,a,b,c,f){function e(a,b){this.javaCheckoutUrl=a;this.javaCheckoutQueryParams=b}function g(a,c){b.logDebug("java-checkout-url-page-state",a,c)}var k=c.get(c.KEYS.JAVA_CHECKOUT_URL_PAGE_STATE_KEY),l=c.get(c.KEYS.JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR),q=new e("",{});return{get:function(b,c){b=b||k;c=
c||l;c=f.parse(b,c);a.logCount("javaCheckoutUrlPageStates",c.length);0===c.length?(g("Java checkout url page state ["+b+"] is NOT present"),b=void 0):b=c[0];b?b=new e(b.javaCheckoutUrl,b.javaCheckoutQueryParams):(a.logCount("javaCheckoutUrlPageStateNotDefined"),b=q);g("Java Checkout Url PageState",b);return b}}});"use strict";h.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-form","turbo-checkout-ref-tagger","turbo-checkout-page-state","turbo-checkout-product-state","turbo-checkout-page-ready").register("turbo-checkout-joined-state",
function(d,a,b,c,f,e,g){function k(a,b,c){b&&(c&&(b.quantity=c),a.push(b))}function l(b,e){function r(){var c=b.turboWeblab;c||a.logCount("turboCheckoutWeblabNameNotDefinedInState");return c}function g(){return b.turboWeblabTreatment}this.pageState=b;this.productStates=e;this.getLineItems=function(){return p.lineItemInputs};this.getActiveId=function(){return p.id};this.getHeaderText=function(){return p?p.turboHeaderText||b.turboHeaderText:b.turboHeaderText};this.getLoadingText=function(){return b.turboLoadingText};
this.getCloseText=function(){return b.turboCloseText};this.getAddressId=function(){return b.addressId};this.getRequestId=function(){return b.requestId};this.getSessionId=function(){return b.sessionId};this.getAdditionalWeblabs=function(){return b.additionalWeblabs};this.getInitiateSelector=function(){return b.initiateSelector};this.getWeblab=r;this.getWeblabTreatment=g;this.isTurboLaunched=function(){return!r()&&"C"!==g()};this.isProductStateEligible=function(){return e.isTurboEligible};this.getRefTag=
function(){if(!p)throw Error("Turbo checkout product state is NOT resolved. Cannot generate ref tag");var a=d.$("#"+p.id);a=c.getRefTag(a);return f.generateJoinedValue(a)};this.getCSRFToken=function(){return b.csrfToken};this.getClientId=function(){return p&&p.checkoutClientId?p.checkoutClientId:"retailwebsite"};this.resolve=function(a){if(a){p=e.states[a];if(!p)throw a="Resolved turbo checkout product state is undefined. Id \x3d "+a,q(a,e),Error(a);q("Resolved new product state",p);d.trigger("turbo:checkout:state:product:resolved")}};
this.getHoldbackSecondaryPanelsWeblab=function(){return b.holdbackSecondaryPanelsWeblab};this.isPrimeCustomer=function(){return b.isPrimeCustomer};var p=1!==e.states.length?B:e.states[0]}function q(a,c){b.logDebug("turbo-checkout-joined-state",a,c)}return{createTurboState:function(b,c,f,d,p,q){if(d&&f)throw Error("Custom item price is NOT supported with warranty");var r=e.get();c&&(r.addressId=c);c=g.get();if(b||d||f||q)b=parseInt(b,10),c.states.forEach(function(c){c.lineItemInputs.forEach(function(c){b&&
(c.quantity=b);d?(c.customItemPrice=d,a.logCount("turboCheckoutItemPriceOverrided")):c.customItemPrice&&a.logCount("turboCheckoutItemPriceSelectorFallBackToTurboState")});k(c.lineItemInputs,q,b);k(c.lineItemInputs,f,b)});r=new l(r,c);r.resolve(p);return r}}});"use strict";h.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-constants","turbo-checkout-page-ready").register("turbo-checkout-page-state",function(d,a,b,c,f,e){function g(a,
b,c,f,d,g,l,q,k,n,t,h,m,x,F,K){this.version=a;this.turboWeblab=b;this.turboWeblabTreatment=c;this.initiateSelector=f;this.turboLoadingText=d;this.turboHeaderText=g;this.turboCloseText=l;this.addressId=q;this.requestId=k;this.sessionId=n;this.csrfToken=t;this.turboAssetsMode=h;this.isJavaPipelineEligible="0"!==this.version&&this.turboAssetsMode!==e.ASSET_MODE_TURBO_ONLY;this.additionalWeblabs=m;this.holdbackSecondaryPanelsWeblab=x;this.isTangoCheckoutEligible=F;this.isPrimeCustomer=K}function k(a,
c){b.logDebug("turbo-checkout-page-state",a,c)}var l=c.get(c.KEYS.TURBO_PAGE_STATE_KEY),q=c.get(c.KEYS.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR),n=c.get(c.KEYS.LEGACY_SESSION_ID_IDENTIFIER),t=new g("0","","C","#buy-now-button","","","","","","","",e.ASSET_MODE_TURBO_ONLY,"","",!1,!1);return{get:function(c,d){b:{c=c||l;d=d||q;d=f.parse(c,d);a.logCount("turboCheckoutPageStates",d.length);if(1<d.length)b.logError("Multiple turbo checkout page states found! Turbo will NOT show","turbo-checkout-page-state",
void 0),k("PageStates",d);else if(0===d.length)k("Turbo checkout page state ["+c+"] is NOT present");else{c=d[0];break b}c=void 0}if(c)if(c.version)c=new g(c.version,c.turboWeblab||"",c.turboWeblabTreatment||"C",c.initiateSelector||".buy-now-button",c.turboLoadingText||"",c.turboHeaderText||"",c.turboCloseText||"",c.addressId||"",c.requestId||"",c.sessionId||"",c.csrfToken||"",c.turboAssetsMode||e.ASSET_MODE_TURBO_ONLY,c.additionalWeblabs||"{}",c.holdbackSecondaryPanelsWeblab||"{}",c.isTangoCheckoutEligible||
!1,c.isPrimeCustomer||!1);else{d=c.inputs||{};var p=c.strings||{};c=new g("1",c.turboWeblab||"",c.turboWeblabTreatment||"C",(c.configurations||{}).initiateSelector||"#buy-now-button",p.TURBO_LOADING_TEXT||"",p.TURBO_CHECKOUT_HEADER||"",p.TURBO_CLOSE_TEXT||"",d.addressId||"",d.requestId||"",d.sessionId||d[n]||"",c.csrfToken||"",c.turboAssetsMode||e.ASSET_MODE_TURBO_ONLY,c.additionalWeblabs||"{}",c.holdbackSecondaryPanelsWeblab||"{}",c.isTangoCheckoutEligible||!1,c.isPrimeCustomer||!1)}else a.logCount("turboCheckoutStateNotDefined"),
c=t;k("Turbo Checkout PageState",c);return c}}});"use strict";h.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-aui-page-state-parser","turbo-checkout-page-ready").register("turbo-checkout-product-state",function(d,a,b,c,f){function e(a,c){this.isTurboEligible=a;this.states=c}function g(a,c,b,e,f){this.id=a;this.isTurboEligible=c;this.lineItemInputs=b;this.turboHeaderText=e||"";this.checkoutClientId=f}function k(a,c,b,e,f,d,g,l,q,k,n){this.asin=c||"";this.offerListingId=
b||"";this.quantity=parseInt(e,10)||1;this.isTurboEligible=!!this.asin&&!!this.offerListingId&&a;this.productTitle=f||"";this.incentivizedCart=d||"";this.customItemPrice=g||"";this.addToCartTimeAsUnixEpochMilliseconds=l||"";this.addToCartSessionId=q||"";this.isDiscoveredAsin=!!k;this.concealmentEligibilityType=n||""}function l(a,c){b.logDebug("turbo-checkout-product-state",a,c)}function q(a){if(!a.lineItemInputs||!a.lineItemInputs.length||!a.id)return l('Versioned product state is invalid. Expected non empty "id" and "lineItemInputs". Turbo may NOT show',
a),r;var c=!0,b=d.map(a.lineItemInputs,function(a){a=new k(a.isTurboEligible,a.asin,a.offerListingId,a.quantity,a.productTitle,a.incentivizedCart,a.customItemPrice,a.addToCartTimeAsUnixEpochMilliseconds,a.addToCartSessionId,a.isDiscoveredAsin,a.concealmentEligibilityType);c=c&&a.isTurboEligible;return a});return new g(a.id,c,b,a.turboHeaderText,a.checkoutClientId)}var n=c.get(c.KEYS.TURBO_PRODUCT_STATE_KEY),t=c.get(c.KEYS.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR),r=new g("buy-now-button",!1,[],"",
"retailwebsite"),A=new e(!1,[r]);return{get:function(c,d){c=c||n;d=d||t;d=f.parse(c,d);a.logCount("turboCheckoutProductStates",d.length);1<d.length&&"turbo-checkout-page-state"===c?(b.logError("turbo-checkout-page-state only supports the single item use case! Turbo will NOT show","turbo-checkout-product-state",void 0),c=[]):c=d;if((d=c)&&d.length){var p=!1;c=[];for(var v=0;v<d.length;v++){var u=d[v];if(u)if(u.version)var h=q(u);else u.inputs&&u.eligibility?(h=u.strings||{},u=new k(u.eligibility.isEligible,
u.inputs.a,u.inputs.oid,u.inputs.quantity,h.TURBO_CHECKOUT_HEADER,u.inputs.incentivizedCart,u.inputs.customItemPrice,u.inputs.concealmentEligibilityType),h=new g("buy-now-button",u.isTurboEligible,[u],h.TURBO_CHECKOUT_HEADER,"retailwebsite")):(l('Legacy product state is missing "inputs" or "eligibility". Turbo will NOT show',u),h=r);else l("Product state parsed DOM object is invalid. Turbo may NOT show",u),h=r;p=p||h.isTurboEligible||!1;u=h.id;if(c[u])throw d="Duplicate product state found. id \x3d "+
u,l(d,c),Error(d);c.push(h);c[h.id]=h}c=new e(p,c)}else l("Parsed states are invalid. Turbo will NOT show",d),c=A;l("Turbo Checkout Product State(s)",c);return c}}});"use strict";h.when("A","turbo-configuration","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-auto-open","turbo-checkout-address-id","turbo-checkout-quantity-input","turbo-checkout-warranty-input","turbo-checkout-custom-price-input","turbo-callback-list","turbo-checkout-joined-state","turbo-checkout-accessories-input","turbo-checkout-session-id-input",
"turbo-checkout-page-state","buy-now-to-tango-switch","turbo-checkout-page-ready").register("turbo-checkout-state-handler",function(d,a,b,c,f,e,g,k,l,q,n,t,r,h,p){function v(a,c,b,d,f,p){a=a||g.getQuantity();c=c||e.getAddressId();b=b||k.getLineItem(a);d=d||l.getCustomPrice();p=p||t.getLineItem();return n.createTurboState(a,c,b,d,f,p)}function A(a,b){c.logDebug("turbo-checkout-state-handler",a,b)}function y(a,b){c.logWarning("turbo-checkout-state-handler",a,b)}function u(a,c,b,e,d){x=v(a,c,b,B,e,d)}
function m(){d.trigger("turbo:checkout:product:onChange");G.callAll()}function z(){var a=v();c.isDeepEquals(x,a)||(x=a,A("New Turbo State",x),m())}var H=d.$,D=a.get(a.KEYS.AJAX_PAGE_UPDATE_EVENT),G=q.create(),C=!1;var x=v();return{isProductTurboEligible:function(){return!C&&x.isProductStateEligible()||a.get(a.KEYS.OVERRIDE_ELIGIBILITY)},isProductTangoEligible:function(){return p.isEnabled()&&h.get().isTangoCheckoutEligible},getLineItems:function(){return x.getLineItems()},getAddressId:function(){return x.getAddressId()},
getWeblabAllocation:function(){return x.getWeblabTreatment()},registerCallback:function(a){G.push(a)},startMonitoringPage:function(){f.updateInputsAndThen(u);g.onChange(z);k.onChange(z);l.onChange(z);t.registerCallback(z);d.off(D,z);d.on(D,z);m()},getRequestId:function(){return x.getRequestId()},getSessionId:function(){return x.getSessionId()},getExperimentName:function(){return x.getWeblab()},getAdditionalWeblabAndTreatmentMap:function(){try{var a=x.getAdditionalWeblabs();""===a&&b.logCount("turboStateAdditionalWeblabsEmptyString");
var c=JSON.parse(a);return c===B?(b.logCount("turboCheckoutParseAdditionalWeblabsUndefined"),y("JSON::parsed additionalWeblabs as undefined for weblabs: ["+a+"]"),{}):c}catch(J){return b.logCount("turboCheckoutParseAdditionalWeblabsException"),y("JSON::parse exception on additionalWeblabs: ["+x.getAdditionalWeblabs()+"]. Exception \x3d "+J),{}}},getStrings:function(){return{TURBO_LOADING_TEXT:x.getLoadingText(),TURBO_CHECKOUT_HEADER:x.getHeaderText(),TURBO_CLOSE_TEXT:x.getCloseText()}},getInitiateSelector:function(){return x.getInitiateSelector()},
isTurboLaunched:function(){return x.isTurboLaunched()},isPhysicalGiftCardExperimentEligible:function(){var a=0!==H("#giftcardcustomtwister_feature_div").length;a&&(A("Physical Gift Card use case"),b.logCount("turboCheckoutGiftCardUseCase"));return a},setTurboStateNotEligible:function(){C=!0},resolveProductState:function(a){x.resolve(a)},getActiveId:function(){return x.getActiveId()},getRefTag:function(){return x.getRefTag()},getCSRFToken:function(){var a;(a=x.getCSRFToken())||(a=(a=x.getSessionId())&&
0<a.length?a:r.getSessionId());a=a||"";if(!a||0>=a.length)y("CSRF Token is empty. This will result in denied requests."),b.logCount("turboCheckoutNoValidCSRFToken");return a},getClientId:function(){return x.getClientId()},getHoldbackSecondaryPanelsWeblab:function(){try{return JSON.parse(x.getHoldbackSecondaryPanelsWeblab())}catch(F){b.logCount("turboCheckoutParseHoldbackSecondaryPanelsWeblabException"),y("JSON::parse exception. Exception \x3d "+F)}}}});"use strict";h.when("A","turbo-checkout-utils",
"turbo-checkout-page-ready").register("turbo-checkout-aui-page-state-parser",function(d,a){var b=d.$;return{parse:function(c,d){c="script[data-a-state*\x3d'"+c+"'], #"+c;d=d?b(d).find(c):b(c);c=[];for(var e=0;e<d.length;e++){a:{try{var f=b(d[e]).text();var k=JSON.parse(f);break a}catch(l){a.logError("JSON::parse exception. Exception \x3d "+l,"turbo-checkout-aui-page-state-parser",void 0)}k=void 0}k&&c.push(k)}return c}}});"use strict";h.when("A","turbo-checkout-page-state","turbo-checkout-csm","turbo-checkout-state-handler",
"tango-checkout-urls","turbo-checkout-page-ready").register("tango-checkout-eligibility",function(d,a,b,c,f){function e(){var a={},b=c.getAddressId();b&&(a.addressID=b);return a}function g(a){q();t=null;a&&a.isTangoEligible?(b.logCount("tangoCheckoutCustomerEligible"),r&&r()):(l(""),b.logCount("tangoCheckoutCustomerNotEligible"),A&&A())}function k(){q();t=null;l("");b.logCount("tangoCheckoutCustomerEligibilityCallFailed")}function l(a){h.when("ready").execute(function(){d.state("checkout-url-migration-page-state",
{checkoutUrl:a})})}function q(){var a=(new Date).getTime()-n;b.logCount("tangoCheckoutCustomerEligibilityTime",a)}var n,t,r,A;return{setEligibleCallback:function(a){r=a},setIneligibleCallback:function(a){A=a},isEligibleFromPageState:function(){return a.get().isJavaPipelineEligible},checkEligibility:function(){n=(new Date).getTime();t&&(t.abort(),t=null);var a=f.buildEligibilityPathWithParams();t=d.$.ajax(a,{type:"POST",data:e(),success:g,error:k})},setTangoPageStateUrl:l}});"use strict";h.when("A",
"turbo-configuration","turbo-shopping-portal-switch","java-checkout-url-page-state","turbo-checkout-page-ready").register("tango-checkout-urls",function(d,a,b,c){function f(a){return 0===a.length?"":"?"+a.join("\x26")}function e(a,c){var b=[],e;for(e in a)if(a.hasOwnProperty(e)){var d=a[e];if(c){var f=e;var g=document.createElement("input");g.type="hidden";g.className="checkout-url-migration-request-param";g.name=f;g.value=d;f=g}else f=e+"\x3d"+d;b.push(f)}return b}function g(a){var c=d.$("#sc-buy-box form, #sw-atc-buy-box form, #sc-luxury-buy-box form, #sc-bazaar-buy-box form");
if(0!==c.length){var b=document.createDocumentFragment();a.forEach(function(a){b.appendChild(a)});c.append(b)}}function k(a){h.when("ready").execute(function(){d.state("checkout-url-migration-page-state",{queryParamString:a})})}var l="unknown";return{buildEligibilityPathWithParams:function(){var c={isAsync:"1",pipelineType:"Chewbacca"};c.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);c.ref_="chk_"+l+"_eligibility";c=e(c,!1);return(b.isShoppingPortalEnabled()?"/checkout/turbo/tango-eligibility":
"/checkout/tango-eligibility")+f(c)},buildProceedToCheckoutPathWithParams:function(){var b=c.get(),d={pipelineType:"Chewbacca"};d.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);d.ref_=b.javaCheckoutQueryParams.ref_||"ox_"+l+"_proceed";var t=e(d,!0);g(t);d=e(d,!1);d=f(d);k(d);return b.javaCheckoutUrl||"/checkout/entry/cart"},buildBuyNowToTangoCheckoutPathWithParams:function(c){var b={pipelineType:"Chewbacca"};b.referrer=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);b.isBuyNow="1";b.ref_=(c||"unknown_buy_now")+
"_chw";c=e(b,!1);return"/checkout/entry/buynow"+f(c)},setRefMarkerPageContext:function(a){l=a}}});"use strict";h.when("jQuery","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-page-load-spinner",function(d,a){function b(){0!==d("#turbo-checkout-auto-load-spinner-container").length&&(d("#turbo-checkout-auto-load-spinner-container").remove(),f.unbind("touchmove touchstart touchend touchcancel click scroll",c))}function c(a){a.preventDefault();a.stopPropagation()}var f=
d("body");a.isAutoOpenEligible()&&(f.bind("touchmove touchstart touchend touchcancel click scroll",c),f.append("\x3cdiv id\x3d'turbo-checkout-auto-load-spinner-container' class\x3d'turbo-checkout-auto-load-spinner-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-circle-container' class\x3d'turbo-checkout-auto-load-circle-container'\x3e\x3cdiv id\x3d'turbo-checkout-auto-load-spinner' class\x3d'a-spinner a-spinner-medium turbo-checkout-auto-load-spinner'\x3e\x3c/div\x3e\x3c/div\x3e\x3c/div\x3e"),
setTimeout(b,5E3));return{removePageLoadSpinner:b}});"use strict";h.when("turbo-checkout-page-ready").register("turbo-callback-list",function(){function d(){var a=[];this.callAll=function(){for(var b=0;b<a.length;b++){var c=a[b];c.apply(c,arguments)}};this.push=function(b){if("function"!==typeof b)throw Error("Invalid callback. Expected typeof 'callback' to be 'function'. typeof \x3d "+typeof b);-1===a.indexOf(b)&&a.push(b)};this.remove=function(b){b=a.indexOf(b);-1!==b&&a.splice(b,1)}}return{create:function(){return new d}}});
"use strict";h.when("turbo-callback-list","turbo-checkout-page-ready").register("turbo-filtered-callback-list",function(d){function a(a){var c=d.create();this.callAll=c.callAll;this.remove=c.remove;this.push=function(b){(b=b[a])&&"function"===typeof b&&c.push(b)}}return{create:function(b){if(!b||"string"!==typeof b)throw Error("Invalid filter parameter. Expected 'filter' to be a non empty string. typeof \x3d "+typeof b+" value \x3d "+b);return new a(b)}}});"use strict";h.when("A","turbo-configuration",
"turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-form",function(d,a,b){function c(c){var b=a.get(a.KEYS.FORM_SELECTOR_OVERRIDE);if(b&&0<f(b).length)return f(b);b=a.get(a.KEYS.FORM_TYPE);if("link"===b)return c.find("a");if("form"===b)return c.closest("form");throw Error("Unsupported FORM_TYPE is configured. value \x3d "+b);}var f=d.$,e=/[\/?&]ref_?=([^?&]+)/;return{getForms:c,getRefTag:function(a){if(1!==a.length)return b.logError("Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",
"turbo-checkout-form"),b.logDebug("turbo-checkout-form","Expected getRefTag input to have a single element. Cannot resolve refTag as this is a data quality risk",a),"";a=c(a);a=((a.attr("action")||a.attr("href")||"")+"\x26"+a.serialize()).match(e)||{};return 2===a.length?a[1]:""}}});"use strict";h.when("A","turbo-checkout-page-ready").register("turbo-checkout-ajax-wrapper",function(d){return{load:function(a,b){b.hasOwnProperty("timeout")||(b.timeout=2E4);return d.ajax(a,b)},loadWithJQXHR:function(a,
b){b.hasOwnProperty("timeout")||(b.timeout=2E4);return d.$.ajax(a,b)},createXHRRequest:function(){var a=new XMLHttpRequest;a.timeout=2E4;return a}}});"use strict";h.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-session-storage","turbo-checkout-quantity-input","turbo-checkout-address-id","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-auto-open",function(d,a,b,c,f,e,g,k){function l(a,c){b.logDebug("turbo-checkout-auto-open",
a,c)}function q(){return n()&&0!==p}function n(){var d;if(d="1"===w.trb_open||"1"===b.getUrlQueryParam("trb_open"))(d=c.isPresent("hasTurboAutoOpened"))&&a.logCount("turboCheckoutAutoOpenLoopPrevented"),d=!d;return d}function t(){return 1===p&&n()}function r(){t()&&(q()&&(p=2,c.set("hasTurboAutoOpened","1")),y(w.trb_bid),d.trigger("turbo:checkout:auto:open"))}var h=d.$,p=0,v="trb_open trb_addr trb_qty trb_warrAsin trb_auth trb_sid trb_bid trb_accessoryAsin trb_accessoryOffer".split(" "),w={},y=function(){};
return{setup:function(a,c){if(n()){p=1;var e=m.location.href;h.each(v,function(a,c){a=b.getUrlQueryParam(c);w[c]=a;e=b.removeQueryParam(c,a,e)});l("Parameters:",w);b.replaceHistory(e);"function"===typeof a?y=a:b.logError("Initiate action must be supplied, and it must be a function.");d.on("turbo:checkout:prefetcher:state:dataStale",r);c()}else p=0,l("Disabled")},reset:function(){c.remove("hasTurboAutoOpened")},isAutoOpenEligible:n,isAutoOpenEnabled:q,isAutoOpenReadyToBeOpened:t,updateInputsAndThen:function(a){var c=
w.trb_qty,b=w.trb_addr,d=w.trb_warrAsin,l=w.trb_bid,p=w.trb_accessoryAsin,t=w.trb_accessoryOffer;if(c||b||d||l||p||t){c&&f.setQuantity(c);b&&e.set(b);if(d){g.select(d);var r=g.getLineItem(c)}if(p&&t){k.select(p);var q=k.getLineItem()}a(c,b,r,l,q)}}}});"use strict";h.when("turbo-checkout-page-ready").register("turbo-checkout-utils",function(){function d(){return navigator.userAgent}function a(c,b){if(c===b||"function"===typeof c&&"function"===typeof b)return!0;if(typeof c!==typeof b)return!1;if("object"!==
typeof c||null===c||null===b)return c===b||c!==c&&b!==b;var d=Object.getOwnPropertyNames(c);if(d.length!==Object.getOwnPropertyNames(b).length)return!1;for(var f=0;f<d.length;f++){var k=d[f];if(!c.hasOwnProperty(k)||!b.hasOwnProperty(k)||!a(c[k],b[k]))return!1}return!0}var b={"\x26":"\x26amp;","\x3c":"\x26lt;","\x3e":"\x26gt;",'"':"\x26quot;","'":"\x26#039;"};return{logError:function(a,b){h.log(a,"ERROR",b||"turbo-checkout-utils")},logWarning:function(a,b){h.log(a,"WARN",b||"turbo-checkout-utils")},
logDebug:function(){},getUserAgent:d,isAndroid:function(){return!!d().match(/[a|A]ndroid/)},isIPhone:function(){return!!d().match(/iPhone/)},isIPad:function(){return!!d().match(/iPad/)},isInternetExplorer:function(){return!!d().match(/MSIE/)},createFQDN:function(a){/^http/.test(a)||(a=m.location.origin?m.location.origin+a:m.location.protocol+"//"+m.location.hostname+":"+m.location.port+a);return a},getUrlQueryParam:function(a,b){b||(b=m.location.href);a=a.replace(/[\[\]]/g,"\\$\x26");return(a=(new RegExp("[?\x26]"+
a+"(\x3d([^\x26#]*)|\x26|#|$)")).exec(b))?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":B},removeQueryParam:function(a,b,d){var c=d;a&&b&&d&&(a=a+"\x3d"+b,c=d.replace(new RegExp("\\?"+a+"[\x26]?","g"),"?"),c=c.replace(new RegExp("[\x26]?"+a,"g"),""));return c},replaceHistory:function(a){m.history.pushState&&m.history.replaceState(null,m.title,a)},isNonEmptyString:function(a){return"string"===typeof a&&0<a.length},isDeepEquals:a,escapeHtml:function(a){return a.replace(/[&<>"']/g,function(a){return b[a]})}}});
"use strict";h.when("turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-csm",function(d){function a(a,b,d,e){return"function"===typeof m.uet?m.uet.apply(m.uet,arguments):e||c()}function b(a,c,b){return"function"===typeof m.ues?m.ues.apply(m.ues,arguments):b}function c(){return+new Date}function f(d){function e(){k&&f&&l&&g&&!p&&"function"===typeof h&&(h(k,f,l,g),p=!0)}var f,g,l,k,p=!1,h;this.getId=function(){return d};this.markClick=function(){k=a("tc",d)};this.markFirstByte=
function(){f=b("t0",d,c())};this.markAboveTheFold=function(){l=a("af",d);e()};this.markCriticalFeature=function(){g=a("cf",d);e()};this.whenDataSet=function(a){h=a;e()}}function e(a){"undefined"!==typeof m.ue_t0&&m.ue.count(a,Date.now()-m.ue_t0)}var g=0,k=[];return{createScope:function(){return new f("chk_turbo_"+ ++g)},logCount:function(a,b){b=b||1;d.logDebug("Logging counter "+a+" with value "+b);if(m.ue&&m.ue.count){var c=a+"_time";m.ue.count(a,b);e(c);for(var f=0;f<k.length;++f)m.ue.count(a+"."+
k[f],b),e(c+"."+k[f])}},logCountSimple:function(a,b){b=b||1;d.logDebug("Logging counter "+a+" with value "+b);m.ue&&m.ue.count&&m.ue.count(a,b)},addCounterExtraSuffix:function(a){k.push(a)},timestamp:c}});"use strict";h.when("A","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-checkout-counter",function(d,a){var b=0,c=0,f=0,e=0,g=0,k=0,l="u";d.on("turbo:checkout:sheet:beforeOpen",function(){a.logCount("turboCheckoutSheetOpen",b);"u"!==l?(++g,a.logCount("turboCheckoutPrefetchUsed",
g),"p"===l?a.logCount("turboCheckoutPrefetchUsedInProgress",g):a.logCount("turboCheckoutPrefetchUsedFull",g)):(++k,a.logCount("turboCheckoutPrefetchMissing",k))});d.on("turbo:checkout:sheet:beforeClose",function(){++c;a.logCount("turboCheckoutSheetClose",c)});d.on("turbo:checkout:prefetcher:state:dataPrefetching",function(){a.logCount("turboCheckoutPrefetchRequested",f);l="p"});d.on("turbo:checkout:prefetcher:state:dataFresh",function(){++e;a.logCount("turboCheckoutPrefetchAvailable",e);l="a"});d.on("turbo:checkout:prefetcher:state:dataStale",
function(){l="u"});return{incrementSheetOpenedCounter:function(){b++},incrementPrefetchCounter:function(){f++},getSheetOpenCount:function(){return b},getPrefetchCount:function(){return f}}});"use strict";h.when("turbo-checkout-page-ready").register("turbo-checkout-cacher",function(){return{createCache:function(d){var a=!1,b;return function(){a||(b=d(),a=!0);return b}}}});"use strict";h.when("A","turbo-configuration","turbo-checkout-utils","turbo-checkout-counter","turbo-checkout-page-ready").register("turbo-checkout-ref-tagger",
function(d,a,b,c){function f(a,b,d){a="chk_"+a+"_"+(b+"_"+c.getPrefetchCount()+"-"+c.getSheetOpenCount());return e(d?a+"_"+d:a)}function e(a){if(!("string"===typeof a&&0<a.length&&64>=a.length&&k.test(a))||l.test(a))throw Error("Invalid ref tag. This would be filtered and replaced in clickstream. Value \x3d "+a);return a}var g={ELIGIBILITY:"eligibility",BUY_NOW:"buyNow",CLOSE:"close"},k=/(^[A-z]$|^[A-z][A-z0-9_-]*[A-Za-z0-9]$)/,l=/[_-]{2,}/,q=a.get(a.KEYS.HOST_PAGE_TYPE_IDENTIFIER);return{generateRefTag:function(a,
b,c){return"ref_\x3d"+f(a,b,c)},generateValue:f,generateJoinedValue:function(a){if(!a)return f(q,g.BUY_NOW,"fallback");try{var d=a+"_"+(g.BUY_NOW+"_"+c.getPrefetchCount()+"-"+c.getSheetOpenCount());return e(d)}catch(r){return b.logError(r.message,"turbo-checkout-ref-tagger"),f(q,g.BUY_NOW,"fallback")}},generateEligibilityValue:function(){return f(q,g.ELIGIBILITY)},ACTIONS:g,TAGS:{TOUCH:"touch",TOUCH_X:"touchX",BACK:"back",ROTATION:"rotation",DONE:"done"}}});"use strict";h.when("A","turbo-checkout-page-ready").register("turbo-checkout-prefetch-timer",
function(d){function a(){e||(e=!0,d.trigger("turbo:checkout:timer:onTimeout"))}function b(){if(e)return!0;var a=(new Date).getTime();return f?6E5<=a-f:!1}var c,f,e=!1;return{startTimer:function(){c||(c=m.setTimeout(a,6E5));f||(f=(new Date).getTime())},isTimeout:b,resetTimer:function(){m.clearTimeout(c);e=!1;f=c=null},checkTimeout:function(){b()&&a()}}});"use strict";h.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-form","turbo-checkout-buy-now-onclick-handler",
"turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-buy-now-button",function(d,a,b,c,f,e,g,k){function l(a,b){c.logDebug("turbo-checkout-buy-now-button",a,b)}function q(b){return b?n(b):a(f.getInitiateSelector())}function n(d){var e=a("#"+d),f=k.get(k.KEYS.BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID);if(!f)return e;var g=a("[id\x3d"+d+"]");if(2>g.length)return e;b.logCount("turboCheckoutBuyNowDuplicateIdPresent");l("Duplicate nodes present for BuyNow button ID: #"+d+". Resolving BuyNow button with CSS: "+
f);g=g.filter(f);return 1!==g.length?(b.logCount("turboCheckoutBuyNowUnableToResolveButtonIdWithCss"),c.logError("Unable to resolve a unique BuyNow button with CSS: "+f+". Defaulting to first button with ID: #"+d,"turbo-checkout-buy-now-button",void 0),e):g}function t(c){l("Buy now button clicked");b.logCount("turboCheckoutBuyNowClicked");"landscape"===z?b.logCount("turboCheckoutLandscapeOrientation"):b.logCount("turboCheckoutPortraitOrientation");g.isConflictingOnClickListenerPresent(a(c.currentTarget))&&
(m=!0);c&&c.currentTarget&&c.currentTarget.id||(l("Click event target is INVALID. Expected event target with an id. Turbo will NOT show",c),m=!0);if(m)m=!1,l("Buy now button callbacks supressed");else{f.resolveProductState(c.currentTarget.id);l("Calling buy now button callbacks...");var d=!1;for(var p=0;p<u.length;p++)d=d||u[p]();d?(l("Suppressing default buy now button action"),c.preventDefault(),c.stopPropagation(),c.stopImmediatePropagation(),d=!0):d=void 0;if(d)return!1}e.getForms(a(c.currentTarget)).attr("data-action",
r());l("Calling default BuyNow action. User will be sent to Checkout SPC. Turbo will NOT show.");b.logCount("turboCheckoutBuyNowDefault");g.callCachedOnClickListenerIfPresent(c.currentTarget,c);return!0}function r(){return q().attr("name")||"submit.buy-now"}function h(a){for(var b=u.length-1;0<=b;--b)u[b]===a&&u.splice(b,1)}function p(a){if(!a&&1<q().length)throw Error("Button id parameter is NOT present. Cannot execute action without a button id on a page with multiple buy now buttons!");}function v(a){a=
q(a);w(a);a.click()}function w(c){for(var d=k.get(k.KEYS.CONFLICTING_INITIATE_LISTENERS),e=0;e<d.length;e++){var f=d[e];l("Unbound configured event '"+f+"' from buy now button");b.logCount("turboCheckoutBuyNowButtonConflictingListeners");c.unbind(f);a(document.body).undelegate(c.selector,f)}}var y=k.get(k.KEYS.BUY_NOW_CLICK_EVENT),u=[],m=!1,z="portrait";d.on("turbo:checkout:clickInitiate",v);d.on("turbo:checkout:orientation:onChange",function(a){z=a.orientation});b.logCount("turboCheckoutBuyNowButtonBound");
return{registerOnClickCallback:function(a){h(a);u.push(a)},deregisterOnClickCallback:h,executeOriginalBuyNowAction:function(a){p(a);m=!0;d.trigger("turbo:checkout:buyNowDisabled");d.trigger("turbo:checkout:clickInitiate",a)},executeTurboBuyNowAction:function(a){p(a);m=!1;v(a)},getSubmitAction:r,bindTurboClickEvent:function(a){a=a||q();g.removeConflictingOnClickListenerIfPresentAndCacheIt(a);a.unbind(y).bind(y,t)},removeConflictingListeners:w,getBuyNowButtons:q}});"use strict";h.when("A","jQuery",
"turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-buy-now-onclick-handler",function(d,a,b,c){function f(b,c){b.each(function(b,d){a(d).removeProp(c)})}function e(b,c){var d=!1;b.each(function(){var b=a(this),e=b.find("[onclick]"),f=b.prop("onclick"),g=e.prop("onclick");return l(f)&&l(g)||1<e.length||!l(f||g)||k(b)!==c?(d=!0,!1):!0});return d}function g(a){return a.prop("onclick")||a.find("[onclick]").prop("onclick")}function k(a){return a.attr("onclick")||
a.find("[onclick]").attr("onclick")}function l(a){return"function"===typeof a}function q(a,b){c.logDebug("turbo-checkout-buy-now-onclick-handler",a,b)}var h;return{callCachedOnClickListenerIfPresent:function(a,c){l(h)&&(q("BuyNow button onclick listener function called."),b.logCount("turboCheckoutBuyNowButtonOnClickListenerCalled"),h.call(a,c.originalEvent))},removeConflictingOnClickListenerIfPresentAndCacheIt:function(a){var c=g(a),d=k(a);l(c)&&d&&(e(a,d)?(q("[DOM ERROR] Turbo will NOT show. BuyNow button node has INVALID 'onclick' DOM structure.",
a),b.logCount("turboCheckoutBuyNowButtonInvalidOnClickDOM")):(q("BuyNow button node has 'onclick' attribute. Removing its listener and caching it.",a),b.logCount("turboCheckoutBuyNowButtonOnClickListenerRemoveAndCache"),h=c,c=a.find("[onclick]"),f(a,"onclick"),f(c,"onclick")))},isConflictingOnClickListenerPresent:function(a){if(a=l(g(a)))q("Turbo will NOT show. BuyNow button node has conflicting 'onclick' listener."),b.logCount("turboCheckoutBuyNowButtonConflictingOnClickListener");return a}}});"use strict";
h.when("A","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-checkout-page-ready").register("turbo-checkout-buy-now-integration",function(d,a,b){function c(b,c){a.logDebug(b,"turbo-checkout-buy-now-integration",c)}var f=d.$,e=[];d.on("turbo:checkout:page:reappear",function(){c("Removing additional form inputs from form",e);for(var a;(a=e.shift())!==B;)a.remove()});return{isBuyNow:function(a){return a instanceof f&&a.attr("data-action")===b.getSubmitAction()},checkoutWith:function(b,d){if(Array.isArray(b)&&
d instanceof f){var g=d;for(var k=1;0<g.find('input[name\x3d"asin.'+k+'"]').length||0<g.find('input[name\x3d"offeringID.'+k+'"]').length;)k++;g=k;k=[];for(var h=0;h<b.length;h++){var t=b[h];if(t!==B&&t.asin&&t.offerListingId){var r=g;t=[f("\x3cinput /\x3e",{type:"hidden",name:"asin."+r,value:t.asin}),f("\x3cinput /\x3e",{type:"hidden",name:"offeringID."+r,value:t.offerListingId}),f("\x3cinput /\x3e",{type:"hidden",name:"quantity."+r,value:t.quantity||1})];Array.prototype.push.apply(k,t);g++}else c('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!',
t),a.logError('Line item inputs are invalid. Expected "asin" and "offerListingId" keys in object. Customer purchase inputs ignored!')}h=d.find('input[name\x3d"itemCount"]');1===h.length?h.val(g):d.append(f("\x3cinput /\x3e",{type:"hidden",name:"itemCount",value:g}));c("Appended additional buy now inputs.",k);d.append.apply(d,k);e=k}else g="Inputs are invalid. Expected array and jQuery object. lineItems \x3d "+b+" $form \x3d "+d,c(g,arguments),a.logError(g)}}});"use strict";h.when("turbo-checkout-page-ready").register("turbo-configuration-keys",
function(d){var a={HOST_PAGE_TYPE_IDENTIFIER:"HOST_PAGE_TYPE_IDENTIFIER",IS_BUY_NOW_TO_TANGO_ENABLED:"IS_BUY_NOW_TO_TANGO_ENABLED",BUY_NOW_TO_TANGO_PARAMETER_ALLOW_LIST:"BUY_NOW_TO_TANGO_PARAMETER_ALLOW_LIST",BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING:"BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING",BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING:"BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING",FORM_TYPE:"FORM_TYPE",FORM_SELECTOR_OVERRIDE:"FORM_SELECTOR_OVERRIDE",BUY_NOW_BUTTON_SELECTOR:"BUY_NOW_BUTTON_SELECTOR",
BUY_NOW_BUTTON_V2_SELECTOR:"BUY_NOW_BUTTON_V2_SELECTOR",BUY_NOW_CLICK_EVENT:"BUY_NOW_CLICK_EVENT",BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID:"BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID",QUANTITY_SELECT_SELECTOR:"QUANTITY_SELECT_SELECTOR",ADDRESS_INPUT_SELECTORS:"ADDRESS_INPUT_SELECTORS",SESSION_ID_SELECTOR:"SESSION_ID_SELECTOR",LEGACY_SESSION_ID_IDENTIFIER:"LEGACY_SESSION_ID_IDENTIFIER",WARRANTY_CHECKBOX_INPUT_SELECTOR:"WARRANTY_CHECKBOX_INPUT_SELECTOR",WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR:"WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR",
WARRANTY_ASIN_INPUT_NAME:"WARRANTY_ASIN_INPUT_NAME",WARRANTY_OFFER_INPUT_SELECTOR:"WARRANTY_OFFER_INPUT_SELECTOR",AJAX_PAGE_UPDATE_EVENT:"AJAX_PAGE_UPDATE_EVENT",PREFETCH_TREATMENT:"PREFETCH_TREATMENT",NO_PREFETCH_TREATMENT:"NO_PREFETCH_TREATMENT",BUY_NOW_ONLY_TREATMENT:"BUY_NOW_ONLY_TREATMENT",IS_DEVICE_FILTER_REQUIRED:"IS_DEVICE_FILTER_REQUIRED",IS_SIGN_IN_SUPPORTED:"IS_SIGN_IN_SUPPORTED",USES_MASH_WILL_REAPPEAR:"USES_MASH_WILL_REAPPEAR",SHOW_SIGN_IN_INTERFACE:"SHOW_SIGN_IN_INTERFACE",IFRAME_ID:"IFRAME_ID",
EXTEND_ELIGIBLE_STATE:"EXTEND_ELIGIBLE_STATE",VIEW_ADAPTER:"VIEW_ADAPTER",PAGE_STATE_PARSING_ROOT_NODE_SELECTOR:"PAGE_STATE_PARSING_ROOT_NODE_SELECTOR",PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR:"PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR",JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR:"JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR",TURBO_PAGE_STATE_KEY:"TURBO_PAGE_STATE_KEY",TURBO_PRODUCT_STATE_KEY:"TURBO_PRODUCT_STATE_KEY",JAVA_CHECKOUT_URL_PAGE_STATE_KEY:"JAVA_CHECKOUT_URL_PAGE_STATE_KEY",
DEVICE_OVERRIDE:"DEVICE_OVERRIDE",CONFLICTING_INITIATE_LISTENERS:"CONFLICTING_INITIATE_LISTENERS",VAS_CHANGE_EVENTS:"VAS_CHANGE_EVENTS",VAS_CHECKBOX_SELCTOR:"VAS_CHECKBOX_SELCTOR",CHECKBOX_EXCLUSION_ROOT_NODES:"CHECKBOX_EXCLUSION_ROOT_NODES",MASH_ADAPTER:"MASH_ADAPTER",IS_ADD_TO_CART_ENABLED:"IS_ADD_TO_CART_ENABLED",IS_BUYNOW_ENABLED_FOR_SCREENREADER:"IS_BUYNOW_ENABLED_FOR_SCREENREADER",BACKGROUND_SCROLL_TARGET_SELECTOR:"BACKGROUND_SCROLL_TARGET_SELECTOR",NO_PREFETCH_EXPERIMENT_WEBLABS:"NO_PREFETCH_EXPERIMENT_WEBLABS",
ENABLED_ACCESSORIES_SELECTOR:"ENABLED_ACCESSORIES_SELECTOR",OVERRIDE_ELIGIBILITY:"OVERRIDE_ELIGIBILITY",validate:function(b){if("string"!==typeof b||!a[b])throw Error("The key '"+b+"' is not defined within 'turbo-configuration-keys'.");}};return a});"use strict";h.when("A","turbo-configuration-keys","turbo-device-configuration","turbo-client-configuration","turbo-eligibility-override","turbo-checkout-page-ready").register("turbo-configuration",function(d,a,b,c,f){function e(a,b){var c=g(a);h[a]=c===
B?b:c}function g(a){var d=c[a];a=b[a];if(k(d))return d;if(k(a))return a}function k(a){return"boolean"===typeof a||a}function l(a){if(!k(c[a])&&!k(b[a]))throw Error("Required configuration override for key '"+a+"' is missing");h[a]=g(a)}var h,n={isGift:"GiftOptions",offerListingID:"OfferService",snsMostCommonFrequency:"SNS",snsOnmlOfferId:"SNS",snsOptIn:"SNS",rcxOrdFreq:"SNS",snsOfferListingID:"SNS",ref:"SNS",skipCart:"",isBuyBack:"",shippingAddressID:"",tag:"",b2brdOptIn:"",cartCustomerID:"",fromSignIn:"",
siteState:"",mbboid:"",mbbq:"",mbba:"","openid.assoc_handle":"","openid.claimed_id":"","openid.identity":"","openid.mode":"","openid.ns":"","openid.ns.pape":"","openid.op_endpoint":"","openid.pape.auth_policies":"","openid.pape.auth_time":"","openid.response_nonce":"","openid.return_to":"","openid.sig":"","openid.signed":"","custom-name.1.incentivizedCart":"IncentivizedCart","custom-value.1.incentivizedCart":"IncentivizedCart",pickupAddressId:"BOPIS",pickupStoreChainId:"BOPIS",pickupStoreChainOwnerId:"BOPIS",
inHouseInstallments:"UFO","installments-check":"UFO","installments-programId":"UFO",isInstallmentsChecked:"UFO",paymentOfferInfo:"UFO","items[0.base][additionalParameters][paymentOfferInfo]":"UFO","items[0.base][additionalParameters][installments][programId]":"UFO",serial:"",a:"",checkoutClientId:"","discoveredAsins.1":"",customId:"",fulfillmentType:"",claim_type:"",new_account:"",returnFromLogin:"",captcha_verified:"",pickupAsin:"","session-id":"",clientName:"",merchantID:"",useDefaultCart:"",distributableLicense:"",
"asin.1":"","offeringID.1":"","quantity.1":"",purchaseAsin:"",type:"",AssociateTag:"",dplnkId:"","submit.buy-now":"","custom-name.2.1":"","address-ui-widgets-enableEmailAddress":"",oid:"",sr:"",ASIN:"","custom-name.1.2":"","address-ui-widgets-enableAddressWizardInlineSuggestions":"","address-ui-widgets-enableAddressWizardForm":"","address-ui-widgets-enterAddressPostalCode":"","address-ui-widgets-locale":"",rebateId:"","custom-value.1.5":"","address-ui-widgets-avsSuppressSoftblock":"",offerListingId:"",
"custom-value.1.6":"",qid:"",cimarronIssuerId:"","custom-name.2.2":"",popoverContentStringId:"","custom-name.1.11":"","address-ui-widgets-csrfToken":"",registryItemID:"","address-ui-widgets-delivery-instructions-desktop-expander-context":"",paymentCadenceValue:"",numberOfPayments:"","address-ui-widgets-obfuscated-customerId":"","address-ui-widgets-enterAddressLine2":"","custom-name.1.13":"",addressID:"","custom-name.1.3":"","address-ui-widgets-amazonBusinessGroupId":"","custom-name.2.3":"",timestamp:"",
"ppw-widgetState":"",taxDistributionStrategy:"","address-ui-widgets-enableLatestAddressWizardForm":"","custom-value.2.3":"","custom-value.2.1":"","custom-value.2.2":"","custom-value.1.13":"","address-ui-widgets-enterAddressFullName":"","inHouseInstallments-programType":"","address-ui-widgets-enableAddressDetails":"",_from:"","address-ui-widgets-enterAddressPhoneNumber":"","custom-value.1.0":"","address-ui-widgets-locationData":"",turboPageRequestId:"","custom-name.2.4":"","address-ui-widgets-delivery-instructions-data":"",
"address-ui-widgets-enterAddressCity":"",quantity:"",paymentCadenceUnit:"","address-ui-widgets-returnLegacyAddressID":"",addressId:"","custom-value.1.7":"",purchaseInputs:"","custom-value.1.1":"","custom-name.1.1":"","preorder-button":"","address-ui-widgets-heading-string-id":"",ref_:"","address-ui-widgets-enterAddressStateOrRegion":"",triggerTurboWeblab:"","custom-value.1.2":"","custom-name.1.4":"",sessionID:"","address-ui-widgets-enableDeliveryInstructions":"","address-ui-widgets-avsSuppressSuggestion":"",
"custom-name.1.6":"",ttclid:"","address-ui-widgets-countryCode":"","custom-name.1.5":"",turboPageSessionId:"","address-ui-widgets-ab-delivery-instructions-data":"","address-ui-widgets-form-load-start-time":"","custom-value.1.3":"",termsAndConditionUrl:"","custom-value.1.11":"",offeringID:"","custom-name.1.0":"","address-ui-widgets-addressFormHideHeading":"","address-ui-widgets-address-wizard-interaction-id":"","custom-name.1.7":"","address-ui-widgets-use-as-my-default":"","custom-name.1.12":"","custom-value.1.12":"",
"address-ui-widgets-addressFormButtonText":"",offerConfigurationType:"","address-ui-widgets-clientName":"",registryID:"","address-ui-widgets-enableAddressTips":"",buyNow:"","address-ui-widgets-previous-address-form-state-token":"",asin:"",fbclid:"","custom-value.1.4":"",triggerTurboWeblabName:"","custom-value.2.4":"","address-ui-widgets-addressFormHideSubmitButton":"","address-ui-widgets-enterAddressLine1":""},t={},r;for(r in n)if(n.hasOwnProperty(r)&&""!==n[r]){var m=n[r];t[m]||(t[m]=[]);t[m].push(r)}return{get:function(b){a.validate(b);
h||(h={},l(a.HOST_PAGE_TYPE_IDENTIFIER),l(a.SHOW_SIGN_IN_INTERFACE),l(a.EXTEND_ELIGIBLE_STATE),l(a.VIEW_ADAPTER),e(a.IS_BUY_NOW_TO_TANGO_ENABLED,!1),e(a.BUY_NOW_TO_TANGO_PARAMETER_ALLOW_LIST,{}),e(a.FORM_TYPE,"form"),e(a.FORM_SELECTOR_OVERRIDE,""),e(a.BUY_NOW_BUTTON_SELECTOR,"#buy-now-button"),e(a.BUY_NOW_BUTTON_V2_SELECTOR,".checkout-buy-now"),e(a.BUY_NOW_CLICK_EVENT,"click.turboCheckout"),e(a.BUY_NOW_CSS_CLASS_TO_RESOLVE_DUPLICATE_BUTTON_ID,""),e(a.QUANTITY_SELECT_SELECTOR,'select[name\x3d"quantity"]'),
e(a.SESSION_ID_SELECTOR,""),e(a.LEGACY_SESSION_ID_IDENTIFIER,""),e(a.ADDRESS_INPUT_SELECTORS,["#unifiedLocation1ClickAddress","#unifiedLocationAddress"]),e(a.WARRANTY_CHECKBOX_INPUT_SELECTOR,".mbb-checkbox input[name\x3dmbba]"),e(a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR,".mbb-checkbox-column"),e(a.WARRANTY_ASIN_INPUT_NAME,"mbba"),e(a.WARRANTY_OFFER_INPUT_SELECTOR,"#mbb-offering-id"),e(a.AJAX_PAGE_UPDATE_EVENT,"a:pageUpdate"),e(a.PREFETCH_TREATMENT,"PREFETCH_DISABLED"),e(a.NO_PREFETCH_TREATMENT,
"T1"),e(a.BUY_NOW_ONLY_TREATMENT,"BUY_NOW_LAUNCHED"),e(a.IS_DEVICE_FILTER_REQUIRED,!1),e(a.IS_SIGN_IN_SUPPORTED,!0),e(a.USES_MASH_WILL_REAPPEAR,!1),e(a.IFRAME_ID,"turbo-checkout-iframe"),e(a.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),e(a.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),e(a.JAVA_CHECKOUT_URL_PAGE_STATE_PARSING_ROOT_NODE_SELECTOR,"#turboState"),e(a.TURBO_PAGE_STATE_KEY,"turbo-checkout-page-state"),e(a.TURBO_PRODUCT_STATE_KEY,"turbo-checkout-page-state"),e(a.JAVA_CHECKOUT_URL_PAGE_STATE_KEY,
"java-checkout-url-page-state"),e(a.DEVICE_OVERRIDE,""),e(a.CONFLICTING_INITIATE_LISTENERS,[]),e(a.CHECKBOX_EXCLUSION_ROOT_NODES,"#simpleBundle_feature_div #monthlyPayments_feature_div #bbg_feature_div #addons_feature_div #mobile-accessory-upsell #twister-plus-feature #payment-options-feature #detailPageGifting_feature_div #giftingODF_feature_div #giftWrapInfoFeature_feature_div #dynamicGiftWrapInfoFeature_feature_div".split(" ")),e(a.ENABLED_ACCESSORIES_SELECTOR,".simpleBundleCheckBoxArea"),e(a.MASH_ADAPTER,
""),e(a.IS_ADD_TO_CART_ENABLED,!0),e(a.IS_BUYNOW_ENABLED_FOR_SCREENREADER,!0),e(a.BACKGROUND_SCROLL_TARGET_SELECTOR,"#productTitleGroupAnchor"),e(a.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),e(a.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),e(a.VAS_CHANGE_EVENTS,["turbo:checkout:sheet:doClose"]),e(a.VAS_CHECKBOX_SELCTOR,"#vas-checkbox-input"),e(a.NO_PREFETCH_EXPERIMENT_WEBLABS,["RCX_CHECKOUT_TURBO_PRIME_UPSELL_222066"]),e(a.BUY_NOW_TO_TANGO_PARAMETER_TO_FEATURE_MAPPING,n),e(a.BUY_NOW_TO_TANGO_FEATURE_PARAMETER_GROUP_MAPPING,
t),e(a.OVERRIDE_ELIGIBILITY,f));var c=h;return c[b]},KEYS:d.copy(a)}});"use strict";h.when("A","turbo-checkout-utils","turbo-checkout-weblab-allocation","turbo-checkout-state-handler","turbo-checkbox-exclusion-listener","turbo-checkout-content-loader","turbo-checkout-device-filter","turbo-callback-list","turbo-checkout-auto-open","turbo-checkout-vas-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-base-eligible-state",function(d,a,b,c,f,e,g,k,l,h,n){function q(){u=
!0}function r(){u=!1}function m(){var a=new p;g.isDeviceTurboEligible()||a.invalidate("Device is NOT eligible");e.isError()&&!b.isNoPrefetch()&&a.invalidate("Prefetch failed");c.isProductTurboEligible()||a.invalidate("Product is NOT eligible");l.isAutoOpenEnabled()||u||a.invalidate("Cheetah eligibility response is false");b.isControl()&&a.invalidate("Weblab is in CONTROL");b.isBuyNowOnly()&&a.invalidate("Weblab is in buy now only treatment");h.isSelected()&&a.invalidate("Value added service is selected and NOT supported");
n.isEligible()||a.invalidate("Accessory selection was not eligible");f.isAnyCheckboxChecked()&&a.invalidate("Exclusion case checkbox is checked");0!==E("#account-linking").length&&a.invalidate("Account linking checkbox present");w.callAll(a);a.logInvalidState();return a.canShow()}function p(){var b=!0,c=[];this.invalidate=function(a){b=!1;c.push(a)};this.logInvalidState=function(){b||a.logDebug("turbo-base-eligible-state","Cannot show turbo because: "+c)};this.canShow=function(){return b}}function v(a){y.callAll(m(),
a)}var w=k.create(),y=k.create(),u=!1,E=d.$;return{addStateCheck:function(a){w.push(a)},canShow:m,registerStateChangeCallback:function(a){y.push(a)},onStateChange:v,setup:function(){e.registerCallback({onTurboEligible:q,onFinish:q,onTurboIneligible:r});c.registerCallback(v);f.onStateChange(v);h.onChange(v);n.registerCallback(v)}}});"use strict";h.when("A","turbo-callback-list","turbo-checkout-page-ready").register("turbo-checkout-base-view",function(d,a){function b(b){if("string"!==typeof b)throw Error("Parameter 'iFrameContainerSelector' is not a string.");
this.onBoundsAdjustedCallbacks=a.create();this.IFRAME_CONTAINER_SELECTOR=b}var c=d.$;b.prototype.updateBounds=function(a,b){if("number"!==typeof a)throw Error("Parameter 'iFrameContainerHeightInPixels' is not a number. Cannot validate bounds.");var c=this.$getIFrameContainer().height(),d=a-c,e=c+d;0!==d&&(this.$getIFrameContainer().height(e),this.updateScrollHeight(a,b),a=parseInt(this.$getIFrameContainer().css("min-height"),10),e=e>a?e:a,c!==e&&this.onBoundsAdjustedCallbacks.callAll(e))};b.prototype.updateScrollHeight=
function(a,b){b&&a!==b?(this.$getIFrame().height(b),this.$getIFrameContainer().css("overflow-y","scroll"),this.$getIFrameContainer().css("-webkit-overflow-scrolling","touch")):(this.$getIFrame().height("100%"),this.$getIFrameContainer().css("overflow-y",""),this.$getIFrameContainer().css("-webkit-overflow-scrolling",""))};b.prototype.getHeight=function(){return this.$getIFrameContainer().height()};b.prototype.$getIFrameContainer=function(){return c(this.IFRAME_CONTAINER_SELECTOR)};b.prototype.$getIFrame=
function(){return c(this.IFRAME_CONTAINER_SELECTOR+" iframe")};b.prototype.pushBoundsAdjustedCallback=function(a){this.onBoundsAdjustedCallbacks.push(a)};return{extend:function(){function a(){b.apply(this,arguments)}a.prototype=Object.create(b.prototype);return a.prototype.constructor=a}}});"use strict";h.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-eligible-state-check",function(d){d.get(d.KEYS.EXTEND_ELIGIBLE_STATE)||h.when("turbo-base-eligible-state").register("turbo-checkout-eligible-state",
function(a){return{canShow:a.canShow,registerStateChangeCallback:a.registerStateChangeCallback,setup:a.setup}})});"use strict";h.when("A","turbo-checkout-state-handler","turbo-configuration","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-weblab-allocation",function(d,a,b){function c(){return a.getWeblabAllocation()}function f(){return a.getExperimentName()}function e(b){for(var c=a.getAdditionalWeblabAndTreatmentMap(),d={},e=0;e<b.length;e++)c.hasOwnProperty(b[e])&&(d[b[e]]=
c[b[e]]);return d}function g(){var b=a.getAdditionalWeblabAndTreatmentMap(),c={},d;for(d in b)b.hasOwnProperty(d)&&-1===h.indexOf(d)&&(c[d]=b[d]);return c}function k(){return"C"===c()}function l(){var a=b.get(b.KEYS.NO_PREFETCH_EXPERIMENT_WEBLABS);return Array.isArray(a)&&-1!==a.indexOf(f())&&!k()}var h=["PAX_CHECKOUT_BUY_NOW_TO_TANGO_MOBILE_EXPERIMENT_969578","PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581"],n=["PAX_TURBO_INITIATE_MIGRATION_MOBILE_868121","PAX_TURBO_INITIATE_MIGRATION_MOBILE_NON_PRIME_986683",
"PAX_TURBO_INITIATE_MIGRATION_DESKTOP_868123","PAX_TURBO_INITIATE_MIGRATION_DESKTOP_NON_PRIME_986684"];return{getAllocation:c,getExperimentName:f,getAdditionalWeblabAndTreatmentMap:g,getBuyNowToTangoWeblabs:function(){return e(h)},getTurboRedesignWeblabs:function(){return e(n)},getHoldbackSecondaryPanelsWeblab:function(){return a.getHoldbackSecondaryPanelsWeblab()},isControl:k,isBuyNowOnly:function(){return c()===b.get(b.KEYS.BUY_NOW_ONLY_TREATMENT)},isDisableTurboWeblabInTreatment:function(){for(var a=
g(),b=["RCX_CHECKOUT_DISABLE_TURBO_FOR_NPA_EXPERIMENT_543201","RCX_CHECKOUT_DISABLE_TURBO_FOR_PRIME_MOBILE_EXPERIMENT_601969","RCX_CHECKOUT_DISABLE_TURBO_FOR_PRIME_DESKTOP_EXPERIMENT_601976"],c=0;c<b.length;c++){var d=b[c];if(d in a&&"T1"===a[d])return!0}return!1},isPrefetch:function(){return!l()&&c()===b.get(b.KEYS.PREFETCH_TREATMENT)},isNoPrefetch:function(){var a=b.get(b.KEYS.NO_PREFETCH_TREATMENT);return l()||!!c().match(a)}}});"use strict";h.when("A","jQuery","turbo-checkout-ajax-wrapper","turbo-checkout-utils",
"turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-buy-now-button","turbo-checkout-form","turbo-configuration","turbo-checkout-state-handler","turbo-checkout-eligibility-response-weblabs","turbo-checkout-eligible-state","turbo-checkout-page-ready").register("turbo-checkout-weblab-trigger",function(d,a,b,c,f,e,g,k,l,h,n,t,r){function q(){d.on("turbo:checkout:prefetch:onTurboEligible",function(){F=!0;y()})}function p(){d.on("turbo:checkout:prefetch:onTurboIneligible",
function(){F=!1;y()})}function v(){d.on("a:pageUpdate",function(){y()})}function w(){d.on("turbo:checkout:auto:open",function(){z()})}function y(){0===u().length?e.logCount("turboCheckoutBuyNowButtonMissing"):0===l.getForms(u()).length&&e.logCount("turboCheckoutBuyNowFormMissing");0<l.getForms(u()).length&&(F?(c.logDebug("turbo-checkout-weblab-trigger","Adding trigger to form: "+g.getAllocation()),D.val(g.getAllocation()),G.val(g.getExperimentName()),C.val(n.getRequestId()),x.val(n.getSessionId()),
l.getForms(u()).append(D,G,C,x)):(c.logDebug("turbo-checkout-weblab-trigger","Removing trigger from form: "+g.getAllocation()),D.remove(),G.remove(),C.remove(),x.remove()))}function u(){var b=h.get(h.KEYS.BUY_NOW_BUTTON_SELECTOR),c=h.get(h.KEYS.BUY_NOW_BUTTON_V2_SELECTOR);return 0===a(b).length?a(c):a(b)}function E(){if(t.get()&&0<t.get().length||F&&!n.isTurboLaunched()){c.logDebug("turbo-checkout-weblab-trigger","Calling cheetah to trigger: "+g.getAllocation());0<l.getForms(u()).find(D).length||
e.logCount("turboCheckoutTriggerMissing");var a=!F||n.isTurboLaunched()?f.buildTriggerWeblabPathWithoutWeblab(n.getRefTag,n.getRequestId(),n.getSessionId()):f.buildTriggerWeblabPathWith(n.getRefTag(),g.getExperimentName(),g.getAllocation(),n.getRequestId(),n.getSessionId());if(F&&!n.isTurboLaunched()&&r.canShow()){var b=g.getAdditionalWeblabAndTreatmentMap();var d=[],k;for(k in b)b.hasOwnProperty(k)&&d.push({weblabName:k,weblabAllocation:b[k]});b=d}else b=[];z(a,b)}}function z(b,c){c=[].concat(c).concat(t.get());
c={additionalWeblabsToTrigger:JSON.stringify(c)};var d="function"===typeof m.Blob;"function"===typeof m.navigator.sendBeacon&&d?(c=new Blob([a.param(c)],{type:"application/x-www-form-urlencoded"}),m.navigator.sendBeacon(b,c)||e.logCount("turboCheckoutTriggerRecordingFailed")):B(b,c)}function B(a,c){b.load(a,{method:"POST",params:c,error:function(a,b,c){a&&204===a.http.status||e.logCount("turboCheckoutTriggerRecordingFailed")},abort:function(a){e.logCount("turboCheckoutTriggerRecordingFailed")}})}
var D,G,C,x,F=!1;return{setup:function(){D=a("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblab",value:""});G=a("\x3cinput/\x3e",{type:"hidden",name:"triggerTurboWeblabName",value:""});C=a("\x3cinput/\x3e",{type:"hidden",name:"turboPageRequestId",value:""});x=a("\x3cinput/\x3e",{type:"hidden",name:"turboPageSessionId",value:""});v();q();p();k.registerOnClickCallback(E);w()},sendTurboWeblabRequest:z}});"use strict";h.when("A","turbo-checkout-form","turbo-checkout-utils","turbo-checkout-state-handler",
"turbo-checkout-page-ready").register("turbo-checkout-page-filter",function(d,a,b,c){function f(a,c){b.logDebug("turbo-checkout-page-filter",a,c)}return{isCurrentViewTurboEligible:function(){var b=d.$(c.getInitiateSelector()),g=a.getForms(b),k=0<b.length&&b.length===g.length;k||(f("Page is NOT turbo eligible. Parent forms / nested links do not match the number of initiate selectors",b),f("Forms",g));return k}}});"use strict";h.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-device-filter-check",
function(d){d.get(d.KEYS.IS_DEVICE_FILTER_REQUIRED)||h.when("turbo-checkout-cacher","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(a){var b=function(){return!0};return{isDeviceTurboEligible:a.createCache(b),isSignInSupported:a.createCache(b),isMashBeta:a.createCache(function(){return!1}),isBuyNowToTangoSupported:a.createCache(b)}})});"use strict";h.when("A","turbo-checkout-state-handler","turbo-checkout-device-filter","turbo-checkout-page-filter","turbo-checkout-weblab-allocation",
"buy-now-to-tango-switch","turbo-checkout-page-ready").register("turbo-checkout-eligibility-aggregator",function(d,a,b,c,f,e){function g(){return c.isCurrentViewTurboEligible()&&a.isProductTurboEligible()&&!f.isBuyNowOnly()&&!f.isDisableTurboWeblabInTreatment()}return{isTurboEligible:g,isTurboOrTangoPrefetchEligible:function(){return g()||e.isEnabled()&&a.isProductTangoEligible()},isSignInSupported:function(){return b.isSignInSupported()&&!f.isBuyNowOnly()},shouldAttemptTangoPrefetch:function(){return e.isEnabled()&&
a.isProductTangoEligible()},shouldAttemptTurboPrefetch:function(){return b.isDeviceTurboEligible()&&!f.isBuyNowOnly()&&!f.isDisableTurboWeblabInTreatment()}}});"use strict";h.when("A","turbo-view-adapter","turbo-checkout-ref-tagger","turbo-filtered-callback-list","turbo-checkout-state-handler","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-eligibility-aggregator","turbo-checkout-eligibility-response-weblabs","turbo-checkout-accessories-input",
"turbo-chewbacca-migration-switch","turbo-chewbacca-migration-shadow","turbo-initiate-migration-switch","buy-now-to-tango-switch","turbo-checkout-page-ready").register("turbo-checkout-content-loader",function(d,a,b,c,f,e,g,k,h,q,n,t,r,A,p,v){function l(c){h.logCount("turboCheckoutInitiate");x();M=!1;L=Date.now();z("Notifying loading callbacks");I="started";P.callAll();d.trigger("turbo:checkout:prefetch:onStart");c&&(v.isEnabled()&&f.isProductTangoEligible()&&h.logCount("tangoCheckCustomerEligibilityPrefetchStarted"),
q.shouldAttemptTurboPrefetch&&q.isTurboEligible()&&h.logCount("turboCheckCustomerEligibilityPrefetchStarted"));h.logCount("turboCheckoutPrefetchStart");var g=c?[]:f.getLineItems(),l=c?b.generateEligibilityValue():f.getRefTag();g=(c?k.buildEligibilityPathWith:k.buildInitiatePathWith)(l,f.getExperimentName(),f.getClientId(),f.getRequestId(),f.getSessionId(),g);p.isEnabled()&&a.updateBottomSheetAttributes();J=e.loadWithJQXHR(g,{type:"POST",data:y(c),headers:u(),xhr:E,success:D,error:G})}function y(a){var b=
{isAsync:1};f.getAddressId()&&(b.addressID=f.getAddressId());f.isPhysicalGiftCardExperimentEligible()&&(b.isPhysicalGiftCard=!0);if(a&&t.isEligible()&&t.getLineItem()){var c=t.getLineItem();b["offerListing.1"]=c.offerListingId;b["requiresEligibilityCheck.1"]="true"}a||f.getLineItems().forEach(function(a,c){c+=1;b["offerListing."+c]=a.offerListingId;b["quantity."+c]=a.quantity;a.incentivizedCart&&(b["incentivizedCart."+c]=a.incentivizedCart,b.incentivizedCart=a.incentivizedCart);a.customItemPrice&&
(b["customItemPrice."+c]=a.customItemPrice,b.customItemPrice=a.customItemPrice);var d=a.addToCartTimeAsUnixEpochMilliseconds;d&&(b["addToCartTimeAsUnixEpochMilliseconds."+c]=d);(d=a.addToCartSessionId)&&(b["addToCartSessionId."+c]=d);a.concealmentEligibilityType&&(b["concealmentEligibilityType."+c]=a.concealmentEligibilityType)});return b}function u(){var a={"x-amz-support-custom-signin":1};a["x-amz-turbo-checkout-dp-url"]=m.location.href;a["x-amz-checkout-entry-referer-url"]=m.location.href;var b=
f.getCSRFToken();b&&0<b.length&&(a["x-amz-checkout-csrf-token"]=b);return a}function E(){var a=e.createXHRRequest();a.addEventListener("readystatechange",function(){if(M||!a.readyState||2>a.readyState)z("Ignoring ready state changed event because headers already received or missing xhr");else if(M=!0,h.logCount("turboCheckoutPrefetchHeadersReceived"),h.logCount("turboCheckoutPrefetchHeadersReceivedDuration",Date.now()-L),a&&a.getResponseHeader("x-amz-turbo-checkout-eligible")){z("Headers received: Turbo eligible");
h.logCount("turboCheckoutTurboEligibleAfterCheetahChecks");var b=a&&a.getResponseHeader("x-amzn-checkout-login-required"),c=q.isSignInSupported();b&&(z("Headers received: Signin required"),h.logCount("turboCheckoutSigninRequired"),c||(z("Sign-in required but it is disabled or not supported."),h.logCount("turboCheckoutSigninNotSupported")));if(c||!b)z("Notifying turbo eligible callbacks"),Q.callAll(),d.trigger("turbo:checkout:prefetch:onTurboEligible");H(a)&&R.callAll(a.getResponseHeader("x-amzn-checkout-login-provider"));
N.callAll()}else z("Headers received: Not turbo eligible"),S.callAll(),d.trigger("turbo:checkout:prefetch:onTurboIneligible"),a&&a.getResponseHeader("x-amz-tango-checkout-eligible")?(h.logCount("tangoCheckoutEligibleAfterCheetahChecks"),T.callAll()):N.callAll()});return a}function z(a,b){g.logDebug("turbo-checkout-content-loader",a,b)}function H(a){return q.isSignInSupported()&&a&&a.getResponseHeader("x-amzn-checkout-login-required")}function D(a,b,c){h.logCount("turboCheckoutPrefetchEnd",Date.now()-
L);J=null;b=c&&c.getResponseHeader("x-amz-turbo-checkout-eligible");var e=a&&a.match(F);if(e&&0<e.length)try{var f=K(e[0]);var k=K.parseJSON(f.text())}catch(O){g.logError("Could not extract page state from cheetah page: "+O)}else z("Could not extract page state from response data");f=k&&"turbo"===k.pipelineType;e=k&&k.currentPurchaseId&&0<String(k.currentPurchaseId).trim().length;var p=c.getResponseHeader("x-amzn-experiment-weblabs-to-trigger");if(p!==B){var l=[];try{l=JSON.parse(p)}catch(O){console.error("Error parsing additional weblabs from xhr response header: ",
O)}n.set(l)}f&&!e&&g.logError("No purchaseid provided, cannot show turbo");b&&f&&e?("started"!==I&&g.logError("turbo-checkout-content-loader","Error processing turbo available callbacks. Expected state to be started but was "+I),z("Notifying turbo available callbacks"),I="success",U.callAll(a,k),d.trigger("turbo:checkout:prefetch:onSuccess"),h.logCount("turboCheckoutTurboPrefetchSuccess")):b&&H(c)?z("Body received: Eligible and sign-in is supported and required."):c.getResponseHeader("x-amz-checkout-redirect")?
m.location.replace(c.getResponseHeader("x-amz-checkout-redirect")):(z("Body received: No turbo page or not eligible: isTurboEligible: "+b+" isTurboPage: "+f+" hasPurchaseId: "+e),C(),h.logCount("turboCheckoutTurboPrefetchFail"))}function G(a,b,c){h.logCount("turboCheckoutPrefetchEnd");J=null;z("Error while initiate",c);h.logCount("turboCheckoutTurboPrefetchError");"timeout"===b&&h.logCount("turboCheckoutInitiateTimeOut");C()}function C(){"started"!==I&&g.logError("turbo-checkout-content-loader","Error processing turbo not available callbacks. Expected state to be started but was "+
I);z("Notifying error callbacks");I="error";V.callAll();d.trigger("turbo:checkout:prefetch:onError")}function x(){J&&J.abort&&(z("Aborting running request..."),J.abort())}var F=/<script.*data-a-state.*checkout:conductor:page.*>.*<\/script>/,K=d.$,J,I="stopped",L,M=!1,P=c.create("onStart"),U=c.create("onFinish"),V=c.create("onError"),Q=c.create("onTurboEligible"),S=c.create("onTurboIneligible"),T=c.create("onTangoEligible"),N=c.create("onTangoIneligible"),R=c.create("onSigninRequired");d.on("turbo:checkout:signInController:onDoSignIn",
C);return{registerCallback:function(a){P.push(a);U.push(a);V.push(a);Q.push(a);R.push(a);S.push(a);T.push(a);N.push(a)},callInitiate:function(){z("Calling turbo initiate");l()},checkEligibility:function(){z("Calling turbo eligibility check only");l(!0)},abortCall:x,isSuccess:function(){return"success"===I},isError:function(){return"error"===I},isStarted:function(){return"started"===I},shadowCallChewbaccaInitiate:function(){r.isShadowModeEnabled()&&A.shadowCallChewbaccaInitiate()}}});"use strict";
h.when("A","jQuery","turbo-checkout-ref-tagger","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-history-manager",function(d,a,b,c){function f(){if(m.history.state&&m.history.state.turboAction)return m.history.state.turboAction}function e(){f();f()||(c.logDebug("turbo-checkout-history-manager","Adding turbo history state"),m.history.pushState({turboAction:"popover"},document.title+" Turbo open"))}var g=!1;a(m).bind("popstate.turbo",function(a){f();g?(c.logDebug("turbo-checkout-history-manager",
"Trigger Subpanel Back Clicked"),d.trigger("turbo:checkout:dimmer:clicked"),g=!1,e()):f()?(c.logDebug("turbo-checkout-history-manager","Trigger sheet open"),d.trigger("turbo:checkout:sheet:doOpen")):(c.logDebug("turbo-checkout-history-manager","Trigger sheet close"),d.trigger("turbo:checkout:sheet:doClose",{immediate:!1,reason:b.TAGS.BACK}))});return{sheetOpened:e,sheetClosed:function(){f();f()&&(c.logDebug("turbo-checkout-history-manager","Removing turbo history state"),m.history.back())},subPanelOpened:function(){g=
!0},subPanelClosed:function(){g=!1}}});"use strict";h.when("A","turbo-checkout-page-ready").register("turbo-base-visibility-manager",function(d){function a(){d.trigger("turbo:checkout:page:gone")}return{setup:function(){d.on("turbo:checkout:sheet:onNavigateAway",a)}}});h.when("turbo-configuration","turbo-checkout-page-ready").execute("turbo-mash-will-reappear-check",function(d){d.get(d.KEYS.USES_MASH_WILL_REAPPEAR)||h.when("turbo-base-visibility-manager").register("turbo-checkout-page-visibility-manager",
function(a){return a})});"use strict";h.when("A","jQuery","turbo-checkout-view-state","turbo-checkout-weblab-allocation","turbo-checkout-state-handler","turbo-checkout-content-loader","turbo-checkout-prefetch-timer","turbo-checkout-page-visibility-manager","turbo-checkout-counter","turbo-checkout-utils","turbo-checkout-eligibility-aggregator","turbo-checkout-auto-open","turbo-checkout-page-ready").register("turbo-checkout-prefetcher",function(d,a,b,c,f,e,g,k,h,q,n,t){function l(a){var b=p;p=a;q.logDebug("turbo-checkout-prefetcher",
"Transitioning from "+b.name+" to "+a.name);if(b.onExit)b.onExit(a.name);if(a.onEnter)a.onEnter(b.name);d.trigger("turbo:checkout:prefetcher:state:"+a.name);d.trigger("turbo:checkout:prefetcher:state",a.name)}var m,p,v=function(){var a=e.isError(),b=!n.isTurboOrTangoPrefetchEligible(),c=g.isTimeout(),d=0===m;q.logDebug("turbo-checkout-prefetcher","Test is data stale: isStaleWhenCheetahReturnsError: "+a+" isStaleWhenProductNotEligiblie: "+b+" isStaleWhenTimeoutOccurs: "+c+" isStaleWhenNoMorePrefetchesAvailable: "+
d);return a||b||c||d},w=function(){var a=n.isTurboOrTangoPrefetchEligible()&&!g.isTimeout()&&0<m;q.logDebug("turbo-checkout-prefetcher","Test should prefetch: eligibilityAggregator.isTurboOrTangoPrefetchEligible(): "+n.isTurboOrTangoPrefetchEligible()+" !timer.isTimeout(): "+!g.isTimeout()+" _prefetchesAvailable: "+m);return a},y={name:"start",onEvent:function(a){n.shouldAttemptTurboPrefetch()||n.shouldAttemptTangoPrefetch()?"controller:onPageLoaded"===a&&l(u):(q.logDebug("turbo-checkout-prefetcher",
"Turbo experience is disabled eligibilityAggregator.shouldAttemptTurboPrefetch() is"+n.shouldAttemptTurboPrefetch()+" and product is not Tango eligible since eligibilityAggregator.shouldAttemptTangoPrefetch() is also"+n.shouldAttemptTangoPrefetch()+" Hence customer eligibility prefetch call is not fired"),l(B))},onExit:function(){f.startMonitoringPage()}},u={name:"dataStale",onEvent:function(a){"page:gone"!==a&&"prefetch:onError"!==a&&"sheet:afterClose"!==a&&w()&&l(E)}},E={name:"dataPrefetching",
onEnter:function(){h.incrementPrefetchCounter();c.isPrefetch()||b.isOpeningOrOpen()||t.isAutoOpenReadyToBeOpened()?e.callInitiate():e.checkEligibility();--m},onEvent:function(a){if("page:gone"===a)l(u);else{var b=e.isSuccess()&&c.isPrefetch(),d=e.isSuccess()&&c.isNoPrefetch();q.logDebug("turbo-checkout-prefetcher","Test is data fresh: isFreshWhenPrefetchResultOKInT1: "+b+" isFreshWhenPrefetchResultOKInT4: "+d);b||d?l(z):v()?l(u):"product:onChange"===a&&w()&&l(E)}},onExit:function(a){"dataFresh"!==
a&&e.abortCall()}},z={name:"dataFresh",onEnter:function(){g.startTimer()},onEvent:function(a){"page:gone"===a?l(u):v()?l(u):(b.isClosed()||"product:onChange"===a)&&w()&&l(E)},onExit:function(){g.resetTimer()}},B={name:"end"},D="controller:onPageLoaded sheet:beforeOpen sheet:afterClose product:onChange prefetch:onSuccess prefetch:onError timer:onTimeout page:gone page:reappear".split(" "),G={"sheet:beforeOpen":function(){m=10}};return{setup:function(){m=10;p=y;a.each(D,function(a,b){var c=G[b];d.on("turbo:checkout:"+
b,function(a){q.logDebug("turbo-checkout-prefetcher","Processing "+b);c&&c();if(p.onEvent)p.onEvent(b)})})},getState:function(){return p.name}}});"use strict";h.when("A","turbo-signin-adapter","turbo-checkout-content-loader","turbo-checkout-buy-now-button","turbo-checkout-csm","turbo-checkout-weblab-allocation","turbo-checkout-utils","turbo-callback-list","turbo-checkout-state-handler","turbo-checkout-eligible-state","turbo-checkout-page-ready").register("turbo-checkout-signin-controller",function(d,
a,b,c,f,e,g,k,h,q){function l(){w=!1}function m(a){w=!0;y=a;f.logCount("turboCheckoutSigninRequired")}function r(){var b=w&&q.canShow();b&&(g.logDebug("turbo-checkout-signin-controller","Showing sign in dialog"),f.logCount("turboCheckoutSigninPopup"),a.show(y,A,p),d.trigger("turbo:checkout:signInController:onDoSignIn"));return b}function A(){g.logDebug("turbo-checkout-signin-controller","Signin success");f.logCount("turboCheckoutSigninSuccess");v.callAll()}function p(){g.logDebug("turbo-checkout-signin-controller",
"Signin failed");f.logCount("turboCheckoutSigninFailed")}var v=k.create(),w=!1,y;return{setup:function(){b.registerCallback({onStart:l,onSigninRequired:m});c.registerOnClickCallback(r)},registerCallback:v.push}});"use strict";h.when("A","turbo-configuration","turbo-callback-list","turbo-filtered-callback-list","turbo-initiate-migration-switch","turbo-checkout-page-ready").register("turbo-checkout-iframe",function(d,a,b,c,f){function e(){return d.$("#"+n)}function g(){if(!(0<e().length))throw Error("Attempted to read / write the iFrame without it being in the DOM. This would result in an undefined iFrame document.");
var a=e()[0];return a.contentDocument||a.contentWindow.document}function k(){if(0<e().length)throw Error("Attempted to insert multiple Turbo Checkout iFrames");}function h(){var a=d.$("\x3ciframe/\x3e",{id:n,src:"about:blank",scrolling:"no","class":"turbo-checkout-blank"});f.isEnabled()&&a.css({borderRadius:"24px 24px 0px 0px"});return a}function q(a){A.push(a)}var n=a.get(a.KEYS.IFRAME_ID),m=c.create("beforeFramePopulated"),r=c.create("afterFramePopulated"),A=b.create();q(function(a){a.addClass("turbo-checkout-shown")});
d.on("turbo:checkout:iframe:document:loaded",function(){A.callAll(e())});return{write:function(a){m.callAll();a+='\x3cscript\x3e"use strict";window.parent.P.now("turbo-checkout-controller").execute("callbackPageController", function callbackPageController(controller) {controller.frameHtmlRendered();});P.when("load").execute("onTurboDocumentLoaded", function onTurboDocumentLoaded() {window.parent.P.when("A").execute("triggerTurboDocumentLoaded", function triggerTurboDocumentLoaded(A) {A.trigger("turbo:checkout:iframe:document:loaded");});});\x3c/script\x3e';
if("string"!==typeof a)throw Error("Attempted to write non-string value to iFrame. typeof \x3d "+typeof a);var b=g();b.open();b.write(a);b.close();r.callAll(e()[0])},remove:function(){e().remove()},appendTo:function(a){k();a.append(h())},insertInto:function(a){k();a.html(h())},hasContent:function(){var a=0<e().length&&g();return a&&(a.body.hasChildNodes()||a.head.hasChildNodes())},registerCallbacks:function(a){m.push(a);r.push(a)},onContentLoaded:q}});"use strict";h.when("A","turbo-checkout-page-ready").register("turbo-checkout-view-state",
function(d){function a(a,b){return function(){return f===a||f===b}}function b(a){return function(){f=a;c.apply(c,arguments)}}function c(a,b){a&&"string"===typeof a&&d.trigger(a,b)}var f=0;return{isClosed:a(0),isClosing:a(1),isOpen:a(2),isOpening:a(3),isClosingOrClosed:a(1,0),isOpeningOrOpen:a(3,2),setToOpen:b(2),setToOpening:b(3),setToClosed:b(0),setToClosing:b(1)}});"use strict";h.when("turbo-checkout-page-load-spinner","turbo-checkout-controller","turbo-checkout-csm","turbo-checkout-page-state",
"turbo-constants","turbo-checkout-page-ready").register("turbo-checkout-startup",function(d,a,b,c,f){c.get().turboAssetsMode!==f.ASSET_MODE_CLT_CX_ONLY&&(d.removePageLoadSpinner(),b.logCount("turboCheckoutControllerPageLoaded"),a.pageLoaded())});"use strict";h.when("turbo-checkout-assets-load-trigger").register("turbo-checkout-page-ready",function(){m.ue&&m.ue.count&&"undefined"!==typeof m.ue_t0&&m.ue.count("turboCheckoutPageReady",Date.now()-m.ue_t0)});"use strict";h.when("A","turbo-checkout-csm",
"turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-quantity-input","turbo-checkout-warranty-input","turbo-checkout-accessories-input","turbo-checkout-page-ready").register("turbo-checkout-authportal-return-query",function(d,a,b,c,f,e,g){function k(a){b.logDebug("turbo-checkout-authportal-return-query",a)}function h(a){return!!a.match("trb_auth\x3d1")}function q(d){if(h(d)){d=((d||"").match(r)||[])[1]||"";var e=c.getSessionId();b.isNonEmptyString(d)||a.logCount("turboCheckoutPostAuthEmptySessionParameter");
b.isNonEmptyString(e)||a.logCount("turboCheckoutPostAuthEmptySessionPageState");b.isNonEmptyString(d)&&b.isNonEmptyString(e)&&d!==e&&(b.logWarning("Turbo Session Flip Detected. Post authentication sessionId \x3d "+e+", Expected \x3d "+d,"turbo-checkout-authportal-return-query"),a.logCount("turboCheckoutPostAuthSessionFlip"))}}var n=/&?(openid|aToken|serial)[^&]*/g,t=/&?trb_(open|auth|qty|warrAsin|sid|accessory(Asin|Offer))=[^&]*/g,r=/&?trb_sid=([^&]*)/,A=/\?[?&]*/,p=/[?&]{2,}/g;q(m.location.search);
return{buildFrom:function(a){k("Initial Query \x3d "+a);a=(a||"?").replace(n,"");a=a.replace(t,"");a+="\x26trb_auth\x3d1\x26trb_open\x3d1";var b=f.getQuantity();a+=1<b?"\x26trb_qty\x3d"+b:"";b=e.getLineItem();a+=b&&b.asin?"\x26trb_warrAsin\x3d"+b.asin:"";b=c.getSessionId();a+=0<b.length?"\x26trb_sid\x3d"+b:"";b=c.getActiveId();a+=b?"\x26trb_bid\x3d"+b:"";b=g.getLineItem();a+=b&&b.asin&&b.offerListingId?"\x26trb_accessoryAsin\x3d"+b.asin+"\x26trb_accessoryOffer\x3d"+b.offerListingId:"";a=a.replace(A,
"?").replace(p,"\x26");k("Final Query \x3d "+a);return a},isReturningFromAuthPortal:h,validateSession:q}});"use strict";h.when("turbo-checkout-utils","turbo-checkout-csm","turbo-checkout-authportal-return-query","turbo-checkout-page-ready").register("turbo-checkout-signin-utils",function(d,a,b){function c(a){return null!==a.match(e)}function f(){var a=b.buildFrom(m.location.search);return encodeURIComponent("https://"+m.location.hostname+m.location.pathname.replace(g,"/ref\x3dtrb_chk_auth")+a)}var e=
/openid\.return_to=([^&$]+)/,g=/(\/ref=[^/]*\/?$|\/?$)/;return{encodeSignInUrl:function(b){if(c(b)){a.logCount("turboCheckoutForceMobileClaimCollection");var g=b.match(e)[1],h=decodeURIComponent(g);g===h&&d.logError("The pre-defined returnTo seems to be un-encoded");h=encodeURIComponent(h+(-1===h.indexOf("?")?"?":"\x26")+"openid.return_to\x3d"+f());return b.replace(g,h)}return b+(-1===b.indexOf("?")?"?":"\x26")+"openid.return_to\x3d"+f()},isEnforceMobileClaimUrl:function(a){var b=null!==a.match("openid.pape.preferred_auth_policies%3DEnforcePossessionOnMobileClaim")||
null!==a.match(decodeURIComponent("openid.pape.preferred_auth_policies%3DEnforcePossessionOnMobileClaim"));a=null!==a.match("intercept%3Dfalse")||null!==a.match(decodeURIComponent("intercept%3Dfalse"));return b&&a},_isReturnToParameterPredefined:c}});"use strict";h.when("turbo-checkout-utils","turbo-checkout-csm","turbo-checkout-auto-open","turbo-checkout-authportal-return-query","turbo-checkout-signin-utils","turbo-checkout-page-ready").register("turbo-checkout-browser-signin",function(d,a,b,c,f){function e(){var b=
m.location.search.match(g)?"turboCheckoutSigninSuccess":"turboCheckoutSigninFailed";a.logCount(b)}var g=/openid\.mode=id_res/;c.isReturningFromAuthPortal(m.location.search)&&(a.logCount("turboCheckoutAuthPortalReturn"),e());return{show:function(c){c=f.encodeSignInUrl(c);a.logCount("turboCheckoutSignInUrlSize",c.length);b.reset();m.location.assign(c)}}});"use strict";h.when("turbo-checkout-utils","turbo-checkout-state-handler","turbo-checkout-page-ready").register("turbo-checkout-strings",function(d,
a){function b(b){return function(){var c=a.getStrings()[b];if(c)return d.escapeHtml(c);d.logDebug("turbo-checkout-strings",'String for key "'+b+'" is undefined! Returning empty string.');return""}}return{getHeaderText:b("TURBO_CHECKOUT_HEADER"),getLoadingText:b("TURBO_LOADING_TEXT"),getCloseText:b("TURBO_CLOSE_TEXT")}});"use strict";h.when("jQuery","A","turbo-checkout-ref-tagger","turbo-checkout-strings","turbo-initiate-migration-switch","turbo-checkout-page-ready").register("turbo-checkout-loading-spinner",
function(d,a,b,c,f){function e(){return d("#turbo-loading-container")}function g(a){var b=d("\x3cdiv\x3e",{id:"turbo-loading-content"}).append(d("\x3cdiv\x3e",{id:"turbo-loading-spinner","class":"a-spinner a-spinner-medium"}));if(f.isEnabled()){var e=d("\x3cspan/\x3e",{id:"turbo-checkout-loading-sheet-dimmer-close",tabindex:0,role:"button","aria-label":c.getCloseText()});b.append(e);e.bind("click",h);e.bind("keypress",l)}"string"===typeof a&&a&&b.append(d("\x3cdiv\x3e",{id:"turbo-loading-text",text:a}));
return b}function h(){a.trigger("turbo:checkout:sheet:doClose",{reason:b.TAGS.TOUCH_X})}function l(c){13===(c.which||c.keyCode||0)&&(c.preventDefault(),a.trigger("turbo:checkout:sheet:doClose",{reason:b.TAGS.TOUCH_X}))}return{create:function(a){return d("\x3cdiv\x3e",{id:"turbo-loading-container"}).append(g(a))},get:e,show:function(){e().addClass("turbo-checkout-shown")}}});"use strict";h.when("A","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-eligibility-response-weblabs",
function(d,a){var b=[];return{set:function(a){d.$.isArray(a)&&(b=a)},get:function(){return b}}});"use strict";h.when("turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-page-ready").register("turbo-checkout-session-storage",function(d,a){function b(b,d){a.logDebug("turbo-checkout-session-storage",b,d)}return{isPresent:function(a){a:{try{var c=m.sessionStorage.getItem(a);break a}catch(e){d.logCount("turboCheckoutSessionStorageExceptionGet"),b("turboCheckoutSessionStorage get() exception",e)}c=
null}return null!==c&&c!==B},set:function(a,f){try{m.sessionStorage.setItem(a,f)}catch(e){d.logCount("turboCheckoutSessionStorageExceptionSet"),b("turboCheckoutSessionStorage set() exception",e)}},remove:function(a){try{return m.sessionStorage.removeItem(a)}catch(f){d.logCount("turboCheckoutSessionStorageExceptionRemove"),b("turboCheckoutSessionStorage remove() exception",f)}}}});"use strict";h.when("A","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-load-events",function(d,
a){var b=a.get(a.KEYS.AJAX_PAGE_UPDATE_EVENT);return{bind:function(a){d.off(b,a);d.off("turbo:checkout:controller:onPageLoaded",a);d.on(b,a);d.on("turbo:checkout:controller:onPageLoaded",a)}}});"use strict";h.when("A","jQuery","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-buy-now-button","turbo-configuration","turbo-checkout-page-ready").register("turbo-checkout-event-verification",function(d,a,b,c,f,e){function g(){var a=e.get(e.KEYS.BUY_NOW_CLICK_EVENT).split(".");return 1<a.length?
a[1]:"turboCheckout"}function h(a){var c=a.map(function(a){return a.namespace}).filter(function(a,b,c){return c.indexOf(a)===b});a.length!==c.length&&b.logCount("turboCheckoutBuyNowButtonDuplicateClickHandler")}function l(a){if((a=a.filter(function(a){return a!==B&&"click"===a.type&&0<=t.indexOf(a.namespace)}))&&0<a.length){var c=0;a.forEach(function(a){a.namespace!==g()&&(b.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelisted:"+a.namespace),c++)});0<c&&b.logCount("turboCheckoutBuyNowButtonClickHandlerWhitelistedQuantity:"+
c)}}function m(a){if((a=a.filter(function(a){return a!==B&&"click"===a.type&&0>t.indexOf(a.namespace)}))&&0<a.length){var c=0;a.forEach(function(){b.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelisted");c++});b.logCount("turboCheckoutBuyNowButtonClickHandlerNotWhitelistedQuantity:"+c)}}var n=!1,t=[g(),"accessoryUpsellInterstitial","makoPreRegistration","moq","siatc","hctpDFL","bbg","vasBuyNow","ppdBundles","makoGiftingMetrics","financialOptionsCheckout"];return{logBuyNowButtonClickHandlerMetrics:function(){var d=
f.getBuyNowButtons();if(!n&&d&&0<d.length){for(var e=0;e<d.length;e++){var g=a._data(d[e],"events");if(!g||!g.click){b.logCount("turboCheckoutBuyNowButtonNoBoundHandlers");return}var k=(g=g.click)?g.length:0;1<k&&(c.logDebug("turbo-checkout-event-verification","Multiple handlers bound to 'click' in Buy Now button. Number of handlers: "+k,void 0),b.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBound"),b.logCount("turboCheckoutBuyNowButtonMultipleClickEventsBoundQuantity:"+k));h(g);m(g);l(g)}n=
!0}}}});"use strict";h.when("turbo-checkout-page-ready").register("turbo-constants",function(){return{ASSET_MODE_TURBO_ONLY:"TURBO_ONLY",ASSET_MODE_CLT_CX_ONLY:"CLT_CX_ONLY",ASSET_MODE_TURBO_AND_CLT_CX:"TURBO_AND_CLT_CX"}});"use strict";h.when("A","turbo-checkout-state-handler","turbo-checkout-ajax-wrapper","turbo-checkout-utils","turbo-checkout-urls","turbo-checkout-csm","turbo-checkout-page-ready").register("turbo-chewbacca-migration-shadow",function(d,a,b,c,f,e){function g(a,b){c.logDebug("turbo-chewbacca-migration-shadow",
a,b)}function h(){var a=b.createXHRRequest();a.addEventListener("readystatechange",function(){A||!a.readyState||2>a.readyState?g("Chewbacca Request Ignoring ready state changed event because headers already received or missing xhr"):(A=!0,e.logCount("turboCheckoutChewbaccaHeadersReceived"),e.logCount("turboCheckoutChewbaccaHeadersReceivedDuration",Date.now()-r),a&&a.getResponseHeader("x-amz-turbo-checkout-eligible")?(g("Chewbacca Request Headers received: Turbo eligible"),e.logCount("turboCheckoutChewbaccaEligible")):
(g("Chewbacca Request Headers received: Not turbo eligible"),e.logCount("turboCheckoutChewbaccaNotEligible")))});return a}function l(a,b,d){e.logCount("turboCheckoutChewbaccaCallEnd",Date.now()-r);p=null;b=d&&d.getResponseHeader("x-amz-turbo-checkout-eligible");if((a=a&&a.match(v))&&0<a.length)try{var f=w(a[0]);var h=w.parseJSON(f.text())}catch(D){c.logError("Chewbacca Request Could not extract page state from chewbacca page: "+D)}else g("Chewbacca Request Could not extract page state from response data");
h=(f=h)&&"turbo"===f.pipelineType;f=f&&f.currentPurchaseId&&0<String(f.currentPurchaseId).trim().length;h&&!f&&c.logError("Chewbacca Request No purchaseid provided, cannot show turbo");b&&h&&f?(g("Notifying Chewbacca Request success"),e.logCount("turboCheckoutChewbaccaCallSuccess")):(g("Notifying Chewbacca Request Fail"),e.logCount("turboCheckoutChewbaccaCallFail"))}function q(a,b,c){e.logCount("turboCheckoutChewbaccaCallEnd");p=null;g("Chewbacca Request Error while initiate",c);e.logCount("turboCheckoutChewbaccaCallError");
"timeout"===b&&e.logCount("turboCheckoutChewbaccaInitiateTimeOut")}function n(){var b={isAsync:1};a.getAddressId()&&(b.addressID=a.getAddressId());a.isPhysicalGiftCardExperimentEligible()&&(b.isPhysicalGiftCard=!0);a.getLineItems().forEach(function(a,c){c+=1;b["offerListing."+c]=a.offerListingId;b["quantity."+c]=a.quantity;a.incentivizedCart&&(b["incentivizedCart."+c]=a.incentivizedCart,b.incentivizedCart=a.incentivizedCart);a.customItemPrice&&(b["customItemPrice."+c]=a.customItemPrice,b.customItemPrice=
a.customItemPrice)});return b}function t(){var b={"x-amz-support-custom-signin":1};b["x-amz-turbo-checkout-dp-url"]=m.location.href;b["x-amz-checkout-entry-referer-url"]=m.location.href;var c=a.getCSRFToken();c&&0<c.length&&(b["x-amz-checkout-csrf-token"]=c);return b}var r,A=!1,p,v=/<script.*data-a-state.*checkout:conductor:page.*>.*<\/script>/,w=d.$;return{shadowCallChewbaccaInitiate:function(){e.logCount("turboCheckoutChewbaccaInitiate");p&&p.abort&&(g("Aborting running Chewbacca request..."),p.abort());
A=!1;r=Date.now();e.logCount("turboCheckoutChewbaccaCallStart");var c=f.buildInitiatePathWith(a.getRefTag(),a.getExperimentName(),a.getClientId(),a.getRequestId(),a.getSessionId(),a.getLineItems(),!0);p=b.loadWithJQXHR(c,{type:"POST",data:n(),headers:t(),xhr:h,success:l,error:q})}}});"use strict";h.when("A","turbo-checkout-utils","turbo-checkout-page-ready").execute("turbo-checkout-buy-again-workaround",function(d,a){d.on("ride:show",function(){a.logDebug("turbo-checkout-buy-again-workaround","Firing page:gone event to reset prefetches");
d.trigger("turbo:checkout:page:gone")})})});
/* ******** */
(function(f){var p=window.AmazonUIPageJS||window.P,r=p._namespace||p.attributeErrors,a=r?r("TurboCheckoutDesktopAssets",""):p;a.guardFatal?a.guardFatal(f)(a,window):a.execute(function(){f(a,window)})})(function(f,p,r){f.when("turbo-configuration-keys","turbo-checkout-page-ready").register("turbo-device-configuration",function(a){if(!c){var c={};c[a.SHOW_SIGN_IN_INTERFACE]="turbo-checkout-browser-signin";c[a.EXTEND_ELIGIBLE_STATE]=!1;c[a.IS_DEVICE_FILTER_REQUIRED]=!0;c[a.VIEW_ADAPTER]="turbo-checkout-modal";
c[a.WARRANTY_CHECKBOX_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]";c[a.WARRANTY_CHECKBOX_RELATIVE_PARENT_SELECTOR]=".abbListItem";c[a.WARRANTY_OFFER_INPUT_SELECTOR]="input[id^\x3dmbb-offeringID-]:checked";c[a.WARRANTY_ASIN_INPUT_NAME]="asin"}return c});"use strict";f.when("A","turbo-checkout-csm","turbo-checkout-utils","turbo-configuration","turbo-checkout-device-variant","turbo-checkout-is-touch-and-orientation-enabled","turbo-checkout-page-ready").register("turbo-checkout-device-filter",function(a,
c,g,f,h,p){function k(a){var b=!1;this.countOnce=function(){b||(c.logCount(a),b=!0)}}function d(a){g.logDebug("turbo-checkout-device-filter",a)}var r="turboCheckoutDisabledDesktopAuiVariant"+h,l,b,y,u,t,m,v;return{isDeviceTurboEligible:function(){l=l||new k("Desktop"===h?"turboCheckoutDesktopAuiVariantEligible":r);var e;(e=b)||(e=g.isInternetExplorer()?"turboCheckoutDisabledDesktopIE":g.isIPad()?"turboCheckoutDisabledDesktopIPad":g.isIPhone()?"turboCheckoutDisabledDesktopIPhone":g.isAndroid()?"turboCheckoutDisabledDesktopAndroid":
"turboCheckoutDesktopUserAgentEligible",e=new k(e));b=e;y=y||new k("turboCheckoutDisabledDesktopTouch");u=u||new k("turboCheckoutDisabledDesktopOrientation");t=t||new k("turboCheckoutDisabledDesktopTouchAndOrientation");m=m||new k("turboCheckoutDisabledTurboDesktopOnDevice");v=v||new k("turboCheckoutEnabledTurboDesktopOnDevice");l.countOnce();"Desktop"===h||d("Aui device variant is NOT Desktop. Turbo will NOT show. Variant is "+h);(e="Desktop"!==h)||(b.countOnce(),e=!!(g.isInternetExplorer()||g.isIPad()||
g.isAndroid()||g.isIPhone()));if(e)return m.countOnce(),!1;if(e=a.capabilities.touch)y.countOnce(),d("Touch enabled device. Turbo will NOT show");var c=a.capabilities.orientation;c&&(u.countOnce(),d("Orientation enabled device. Turbo will NOT show"));e&&c&&t.countOnce();if((e||c)&&!p)return m.countOnce(),!1;v.countOnce();return!0},isSignInSupported:function(){return f.get(f.KEYS.IS_SIGN_IN_SUPPORTED)},isMashBeta:function(){return!1},isBuyNowToTangoSupported:function(){return!0}}});"use strict";f.when("turbo-checkout-page-ready").execute(function(){f.declare("turbo-checkout-device-variant",
"Desktop")});"use strict";f.when("A","a-modal","turbo-checkout-csm","turbo-checkout-utils","turbo-checkout-iframe","turbo-checkout-base-view","turbo-checkout-loading-spinner","turbo-checkout-view-state","turbo-checkout-ref-tagger","turbo-checkout-strings","turbo-checkout-page-ready").register("turbo-checkout-modal",function(a,c,f,F,h,G,k,d,z,l){function b(a){F.logDebug("turbo-checkout-modal",a)}function g(){!A()||d.isOpeningOrOpen()?b("show() suppressed. View is null or undefined or view state is opening or open"):
(d.setToOpening(),m().show())}function u(){w&&d.isOpeningOrOpen()&&(h.appendTo(e()),h.write(w))}function t(){h.remove();if(0<e().length)b("Modal frame is in DOM. Inserting Spinner"),e().height("").html(k.create(l.getLoadingText())).append(v()),q("#turbo-checkout-modal-header").text(l.getHeaderText());else{b("Modal frame is NOT in DOM. Resetting Modal");var a={inlineContent:q("\x3cdiv\x3e",{id:"turbo-checkout-frame"}).html(k.create(l.getLoadingText())).append(v()).prop("outerHTML"),padding:"none",
dataStrategy:"inline",header:'\x3cdiv id\x3d"turbo-checkout-modal-header"\x3e'+l.getHeaderText()+"\x3c/div\x3e"};m().update(a)}}function m(){return B=B||c.get(q("#turbo-checkout-modal"))}function v(){return q("\x3cscript/\x3e",{type:"text/javascript",html:'P.when("A").execute(function turboFrameReady(A) { A.trigger("turbo:checkout:frame:ready"); });'})}function e(){return q("#turbo-checkout-frame")}function x(a){!A()||d.isClosingOrClosed()?b("close() suppressed. View is undefined or null or view state is closing or closed"):
(n=a||n,n.notify=!0===n.notify||n.notify===r,d.setToClosing(),m().hide())}function A(){var a=m();a||b("Modal is undefined or null. Modal \x3d "+a);return a?!0:!1}function C(b){q(document.body).unbind("click");b();a.trigger("turbo:checkout:sheet:onNavigateAway");x({notify:!1,immediate:!0,doNotLog:!0})}function D(a){b("onDismiss");n={notify:!0,reason:a}}var q=a.$,n={},w,B,E=new (G.extend())("#turbo-checkout-frame");h.onContentLoaded(function(a){k.get().remove()});a.on("a:popover:dismiss:turbo",function(){b("onClick_X");
D(z.TAGS.TOUCH_X)});a.declarative("a-popover-floating-close","click",function(){b("onDimmerClicked");D(z.TAGS.TOUCH)});a.on("a:popover:beforeShow:turbo",function(){b("onBeforeOpen");d.setToOpening("turbo:checkout:sheet:beforeOpen");t()});a.on("a:popover:show:turbo",function(){b("onOpen");d.setToOpen();w||k.show()});a.on("a:popover:beforeHide:turbo",function(){b("onBeforeClose");d.setToClosing.apply(d,!0===n.notify?["turbo:checkout:sheet:beforeClose",n]:r);e().removeClass("turbo-checkout-shown")});
a.on("a:popover:hide:turbo",function(){b("onClose");d.setToClosed("turbo:checkout:sheet:afterClose");n={}});a.on("a:popover:afterHide:turbo",t);a.on("turbo:checkout:sheet:doOpen",g);a.on("turbo:checkout:sheet:doClose",x);a.on("turbo:checkout:frame:ready",u);a.on(a.constants.BROWSER_EVENTS.ORIENTATION_CHANGE,function(){f.logCount("turboCheckoutDesktopOrientationChange");d.isOpen()&&f.logCount("turboCheckoutDesktopOrientationChangeWhenModalOpen")});a.on("turbo:checkout:state:product:resolved",function(){q("#turbo-checkout-modal-header").text(l.getHeaderText())});
a.on("turbo:checkout:update:modal:header:afterReload",function(a){null!==a&&q("#turbo-checkout-modal-header").text(a)});return{show:g,setContent:function(a){w=a;b("iFrame content saved");d.isOpeningOrOpen()?u():(b("setFrameContent NOT called"),b("viewState is not opening? isOpeningOrOpen \x3d "+d.isOpeningOrOpen()),b("iFrame already has content? iFrame.hasContent \x3d "+h.hasContent()))},removeContent:function(){w="";t()},close:x,closeToFullscreen:function(a){C(function(){p.location.href=a})},closeImmediatelyThenExecute:C,
closeAndNavigate:function(b){p.location.href=b;a.trigger("turbo:checkout:sheet:onNavigateAway");x({notify:!1,doNotLog:!0})},registerCallbacks:h.registerCallbacks,updateBounds:function(a){E.updateBounds(a)},getHeight:function(){return E.getHeight()},updateBottomSheetAttributes:function(){}}});"use strict";f.declare("turbo-checkout-is-touch-and-orientation-enabled",!1)});
/* ******** */
(function(d){var e=window.AmazonUIPageJS||window.P,f=e._namespace||e.attributeErrors,a=f?f("DetailPageTurboCheckoutDesktopAssets",""):e;a.guardFatal?a.guardFatal(d)(a,window):a.execute(function(){d(a,window)})})(function(d,e,f){d.when("A","turbo-checkout-form","turbo-checkout-utils","turbo-checkout-content-loader","turbo-configuration","turbo-checkout-load-events","turbo-checkout-eligible-state","buy-now-to-tango-parameter-eligibility-listener","buy-now-to-tango-switch","turbo-checkout-page-ready").register("buy-now-to-tango-url-handler",
function(a,d,e,c,m,f,r,t,B){function w(){n=!0;t.isBuyNowToTangoParameterEligible()&&x()}function A(){n=!1}function y(){if(n)if(t.isBuyNowToTangoParameterEligible()&&!u)u=!0,x();else{u=!1;v("handle tango ineligible and update form action url to the fallback url");p=!1;var b=g(h);!b||1>b.length||(b[0].removeEventListener("click",k),l=!1)}}function z(){var b=g(h);if(!b||1>b.length)return!1;p&&!r.canShow()?(b[0].addEventListener("click",k),l=!0):(b[0].removeEventListener("click",k),l=!1)}function x(){p=
!0;if(r.canShow())v("Tango eligible but Turbo being eligible takes precedence when handling URL");else{var b=g(h);if(!b||1>b.length)return!1;b[0].addEventListener("click",k);l=!0}}function k(b){v("Suppressing the default buy now button action for Buy Now to Tango Desktop");b.preventDefault();b.stopPropagation();b.stopImmediatePropagation();b=d.getForms(g(h));b.append(C(d.getRefTag(g(h))));b.attr("action","/checkout/entry/buynow");b.submit();return!0}function C(b){var a=document.createDocumentFragment();
a.appendChild(q("pipelineType","Chewbacca"));a.appendChild(q("referrer",D));a.appendChild(q("isBuyNow","1"));a.appendChild(q("ref_",(b||"unknown_buy_now")+"_chw"));return a}function q(a,c){var b=document.createElement("input");b.type="hidden";b.className="buy-now-to-tango-migration-request-param";b.name=a;b.value=c;return b}function v(a,c){e.logDebug("buy-now-to-tango-url-handler",a,c)}var g=a.$,h=m.get(m.KEYS.BUY_NOW_BUTTON_SELECTOR),D=m.get(m.KEYS.HOST_PAGE_TYPE_IDENTIFIER),n=!1,u=!1,p=!1,l=!1;
f.bind(function(){B.isEnabled()&&(c.registerCallback({onTangoEligible:w,onTangoIneligible:A}),t.onStateChange(y),r.registerStateChangeCallback(z))});return{_forTestOnly:{_setTangoAsinCustomerEligibleAndCheckBuyNowToTangoParameterEligibility:w,_onBuyNowToTangoParameterEligibilityChange:y,_onTurboEligibilityChange:z,_overrideBuyNowButtonFormAttributesAndSubmit:k},isBuyNowToTangoEligible:function(){return p},isTangoCustomerAndAsinEligible:function(){return n},isBuyNowClickPointingToTango:function(){return l}}});
"use strict";d.when("turbo-configuration-keys","turbo-product-state-key","turbo-state-parsing-root-node-selector","turbo-checkout-page-ready").register("turbo-client-configuration",function(a,d,e){if(!c){var c={};c[a.HOST_PAGE_TYPE_IDENTIFIER]="detail";c[a.IS_BUY_NOW_TO_TANGO_ENABLED]=!0;c[a.BUY_NOW_TO_TANGO_PARAMETER_ALLOW_LIST]={asin:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",sessionID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",timestamp:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
qid:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",sr:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",offeringID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",buyNow:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",addressID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",registryID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",registryItemID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",quantity:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
rebateId:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",triggerTurboWeblab:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",triggerTurboWeblabName:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",turboPageRequestId:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",turboPageSessionId:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",pipelineType:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",referrer:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
ref_:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",isBuyNow:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","anti-csrftoken-a2z":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","items[0.base][customerVisiblePrice][amount]":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","items[0.base][customerVisiblePrice][currencyCode]":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","items[0.base][customerVisiblePrice][displayString]":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
"items[0.base][asin]":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",clientName:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","items[0.base][offerListingId]":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",pageLoadTimestampUTC:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",offerListingID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","session-id":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",ASIN:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
isMerchantExclusive:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",merchantID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",isAddon:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",nodeID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",sellingCustomerID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",storeID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",tagActionCode:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",viewID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
ctaDeviceType:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",ctaPageType:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",usePrimeHandler:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",smokeTestEnabled:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",rsid:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",sourceCustomerOrgListID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",sourceCustomerOrgListItemID:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
wlPopCommand:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","items[0.base][quantity]":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","submit.buy-now":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","dropdown-selection":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","dropdown-selection-ubb":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",skipCart:"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","custom-name.1.1":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581",
"custom-value.1.1":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","custom-name.1.incentivizedCart":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581","custom-value.1.incentivizedCart":"PAX_CHECKOUT_BUY_NOW_TO_TANGO_DESKTOP_EXPERIMENT_969581"};c[a.BUY_NOW_ONLY_TREATMENT]="T1";c[a.NO_PREFETCH_TREATMENT]=/T[2-9]/;c[a.ADDRESS_INPUT_SELECTORS]=["#unifiedLocation1ClickAddress","#addToCart input[name\x3d'dropdown-selection']","#unifiedLocationAddress","input[name\x3d'dropdown-selection']"];
c[a.QUANTITY_SELECT_SELECTOR]="#quantity";c[a.CONFLICTING_INITIATE_LISTENERS]=["click.siatc"];c[a.VAS_CHANGE_EVENTS]=["vas:remove-service-asin-buybox-event","vas:add-service-asin-buybox-event"];c[a.VAS_CHECKBOX_SELCTOR]="#ppdb-add-service-checkbox";c[a.SESSION_ID_SELECTOR]='input[name\x3d"session-id"]';c[a.TURBO_PRODUCT_STATE_KEY]=d;c[a.PAGE_STATE_PARSING_ROOT_NODE_SELECTOR]=e;c[a.PRODUCT_STATE_PARSING_ROOT_NODE_SELECTOR]=e}return c});"use strict";d.when("turbo-checkout-page-ready").execute(function(){d.declare("turbo-product-state-key",
"turbo-checkout-page-state")});"use strict";d.when("turbo-checkout-page-ready").execute(function(){d.declare("turbo-state-parsing-root-node-selector","#turboState")})});
/* ******** */
